<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36 Edg/130.0.0.0" version="25.0.1" pages="9">
  <diagram name="类与数据结构Lua端" id="ZvRVtKMHqjIb7jlLaT23">
    <mxGraphModel grid="1" page="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-53" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePufferManager&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PufferInstanceMap:TMap&amp;lt;int32, PufferInstance&amp;gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;msdkConfig:MoeMSDKConfig&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;MoePufferCommonUtils&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;pufferInsMap&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;对象与id的对应&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&lt;/span&gt;&lt;/font&gt;__pufferKeyIdMap&amp;nbsp; //puffer的key与id的对应&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;initWaitListQue&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;等待初始化列表&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;pufferFileMap&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;pufferChunkMap&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;openMaxLimit&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;commonConf&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;__PufferBasePath&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;msdkConfig&amp;nbsp; //&lt;/font&gt;&lt;b style=&quot;background-color: initial; font-size: 12px; text-align: center;&quot;&gt;MoeMSDKConfig&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ CreatePufferInstance():int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ DestroyPufferInstance():int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PausePufferInstance(int32 id):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ResumePufferInstance(int32 id):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ResetPufferInstance(int32 id):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPufferInstance(int32 id): PufferInstance&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;GetPakFileMergeState(pakName)&amp;nbsp; //是否需要合并&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;CreatePuffer(commonConf)&amp;nbsp; //根据&lt;b style=&quot;text-align: center;&quot;&gt;MoeMSDKConfig&lt;/b&gt;创建pufferinstance对象池&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;OpenMaxSpeedLimit(bOpen)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;是否开启最大限速进行下载&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;PausePuffer(pufferId, tag)&amp;nbsp; //暂停puffer&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;ResumePuffer(pufferId, tag)&amp;nbsp; //恢复puffer&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;ResetPuffer(pufferId)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;重新初始化&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;初始化失败重试调这个&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;StartDownloadPak(params)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;下载指定&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;pakName&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;PauseDownloadPak(pakName, mutexTag)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;暂停&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;下载&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;GetPufferByChunkName(chunkName)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;chunkName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;实例&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-300" y="920" width="480" height="500" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-54" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakLoader&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（pak加载器，与pak属于一对一的关系，执行mount、下载、合并等操作,本质上是个装饰器）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ pufferInstance:MoePufferInstance&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ MergeType: EMergeType // 马上，lazy&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;PakName&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;PufferInstance&amp;nbsp; //puffer加载器&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;RefCount&amp;nbsp; //引用计数&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;RefTag&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;当前&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;关联的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Tag&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;，可以用于查询&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;卸载所有&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Tag&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;LoaderState&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;当前&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;的加载状态&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;MergeType&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;当前&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Merge&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;类型 是立刻&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Merge&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;ChunkName&amp;nbsp; //包组名&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;IsStatic&amp;nbsp; //静态包&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;IsInContentBase&amp;nbsp; //是否在底包&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;LocalPath&amp;nbsp; //本地加载地址&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;PakMergeTask&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;DownloadOrder&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ LoadPakFromRemote():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ LoadPakFromLocal():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StartDownLoadTask():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StopDownloadTask():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ OnDownloadFinish():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ MountPak(): bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ UnMountPak():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsPakMounted():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsPAKFileReady(): bool //pak已经下载，还没调用ue的mount&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ SetPakLoadSchedule():void //设置pak加载的方案（优先从远端下载/强制从远端下载,无论本地是否拥有，远端没有，再从本地加载，本地加载的搜索路径是（文件夹路径））&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ DeletePakFile():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsPakCanDelete():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakFileSize():float&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsStaticPak():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-760" y="330" width="530" height="530" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-55" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeMSDKConfig&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（设置下载配置puffer与dolphin）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;Struct_PufferVO: puffer信息的结构体&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;gywqxVKAuNaPn6M9sK-j&quot;&gt;+&amp;nbsp;PufferVOMap: 已配置的puffer信息&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;gywqxVKAuNaPn6M9sK-j&quot;&gt;+&amp;nbsp;DolphinVO： dolphin信息&lt;/font&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 13.5pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ RegistPufferVO(PufferVO VO):bool&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;修改puffer信息&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ RegistDolphinVO(DolphinVO VO) : bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetCurrDolphinVO():DolphinVO&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPufferVO(int32 id):PufferVO&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-320" y="1510" width="530" height="210" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-58" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePufferInstance&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（与puffer服务器一对一，几乎一个玩法一个puffer，一次性下载几个由FMoePufferInstance决定）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;self.mgr = owner&lt;br&gt;self.pufferInsId = initInfo.pufferInfo.Id&lt;br&gt;self.pufferPriority = initInfo.pufferInfo.Priority or 1&lt;br&gt;self.pufferKey = initInfo.pufferInfo.PufferKey&lt;br&gt;self.pufferState = &lt;span style=&quot;font-weight: bold; font-style: italic;&quot;&gt;MoePufferConst&lt;/span&gt;.E_PufferConnectState.None&lt;br&gt;self.pufferUsualState = &lt;span style=&quot;font-weight: bold; font-style: italic;&quot;&gt;MoePufferConst&lt;/span&gt;.E_PufferUsualState.None&lt;br&gt;self.remotePakVersions = &lt;span style=&quot;font-weight: bold; font-style: italic;&quot;&gt;MoePufferCommonUtils&lt;/span&gt;.DeepCopy(&lt;span style=&quot;font-weight: bold; font-style: italic;&quot;&gt;MoePufferConst&lt;/span&gt;.Struct_PakVersion)&lt;br&gt;self.localPakVersions = &lt;span style=&quot;font-weight: bold; font-style: italic;&quot;&gt;MoePufferCommonUtils&lt;/span&gt;.DeepCopy(&lt;span style=&quot;font-weight: bold; font-style: italic;&quot;&gt;MoePufferConst&lt;/span&gt;.Struct_PakVersion)&lt;br&gt;self.pufferTag = &lt;span style=&quot;font-weight: bold; font-style: italic;&quot;&gt;MoePufferConst&lt;/span&gt;.BaseFPufferTagVal + initInfo.pufferInfo.Id&lt;br&gt;self.fPuffer = nil&lt;br&gt;self.retryInitCnt = 0&lt;br&gt;self.pufferInitInfo = initInfo&lt;br&gt;self.pufferPakList = {}&lt;br&gt;self.pufferDiffList = {} puffer上的pak列表信息，一个版本一个&lt;br&gt;self.openMaxLimit = owner.openMaxLimit&lt;br&gt;self.__diffPakFileMap = {} pak名、是否准备好，是否合并&lt;br&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;--- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;下载任务相关&lt;br&gt;&lt;/span&gt;self.downloadTasks = {}         &lt;span style=&quot;font-style: italic;&quot;&gt;-- mutex: downloadFileTask&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;--- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;初始化过程中的中间数据&lt;br&gt;&lt;/span&gt;self.__blackboardData = {}&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;__blackboardData.diffFileCacheInfo：pak文件的diff文件&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;finalPakFiles  //已经准备好，可以使用的文件&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Init():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Close():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Puase():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Resume():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetDownlaodTask(int32 TaskId):MoePufferDownloadTask&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ CreateDownloadTask():int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ DestroyDownloadTask(int32 id):bool&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;OnUpdatePakDownloadList()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;StartDownloadTask(params)&amp;nbsp; //下载&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;CheckDiffFileHasFailed(diffFileName)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;判断是否二进制差异更新失败&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="243" y="730" width="730" height="600" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-59" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePufferDownloadTask&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（与pak一对一，只是一个下载任务，不进行下载操作）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;owner&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;fPuffer&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;priority&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;gcPriority&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;pakFile&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;diffNormalPakFile&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;taskId&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;taskState&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;mutexTag：下载的pak哪些包组中有&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;retryCnt&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;__mutexExtraInfo&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;__mutexExtraInfo.priorityCache：该pak所在的某一个包组的下载优先级&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StartDownload(Action&amp;lt;bool&amp;gt; OnDownloadFinish):bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StopDownload():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PauseDownload():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ResumeDownload():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ FinishDownload():bool&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="950" y="1405" width="402.5" height="320" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-60" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakManager&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（pak单包管理器，全局单例，主要是下载和mount两部分）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakLoaderMap:TMap&amp;lt;FString,MoePakLoader&amp;gt;&amp;nbsp; //每个pak的加载器列表&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PufferManager:MoePufferManager&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ msdkConfig:MoeMSDKConfig&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;+&amp;nbsp;PufferManager&amp;nbsp; //puffer对象管理器&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakLoader(FString PakName):MoePakLoader&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakLoaders(TArray&amp;lt;FString&amp;gt; PakNames) :TArray&amp;lt;MoePakLoader&amp;gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PreparePakFiles(mergetype,TArray&amp;lt;FString&amp;gt; PakName):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;（&lt;span style=&quot;background-color: initial;&quot;&gt;Download + Merge&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;）&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;GetPakLoaderList(inChunkName)&amp;nbsp; //&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;ChangeDownloadLevel(inPakName, inTaskLevel)&amp;nbsp; //修改下载优先级&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;DeleteFile(inPakName, bCanReDownload)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;MountPak(inPakName)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;UnMountPak(inPakName)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;mount 异步+同步&amp;nbsp; &amp;nbsp;1pakname 2 callback 3 isAutoPrepare&amp;nbsp; &amp;nbsp;当触发下载的时候，Push一个Event&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-1370" y="480" width="520" height="300" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-61" value="GM指令，这里缓存了Mount的状态，以防有其他用户会自己调用ue的mount方法，从而导致mount和unmount 的缓存状态不太对，所以，这里需要加一个gm指令可以在某些时刻全局检查一下当前的mount和unmount是否跟ue里记录的状态正确；&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;" parent="1" vertex="1">
          <mxGeometry x="-650" y="30" width="490" height="170" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-62" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeChunkGroupManager&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（pak包组管理器，全局单例，同时也是各个shedule对外的一个装饰器）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakManager：MoePakManager //pak加载管理器&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;matchInfoNonessentialpakGroupCheckCache&amp;nbsp; //？&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;CurChunkGroupConfigMap&amp;nbsp; //&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupDownloadSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupMountSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupUISchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupShaderSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupSceneSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupDeleteSchedule&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;包组信息相关：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;font-size: 13px; font-family: Mebcg4QQO1nsYdmMe52B; background-color: initial;&quot;&gt;+ InitChunkGroupConfigMap（）&amp;nbsp; //初始化所有包组信息&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;font-size: 13px; font-family: Mebcg4QQO1nsYdmMe52B; background-color: initial;&quot;&gt;+GetChunkGroupConfigMap（） //获取所有包组信息&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ GetChunkGroupConfigItem（inGroupId） //获取当前包组&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ IsInAppByPlatforms（downloadPlatforms） //当前包组是否需要下载，&lt;font color=&quot;#ff0000&quot;&gt;暂时存疑&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ IsInApp（InPathPakName） //&lt;/font&gt;&lt;span style=&quot;color: rgb(255, 0, 0); font-family: Mebcg4QQO1nsYdmMe52B; background-color: initial;&quot;&gt;暂时存疑&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;puffer相关：&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;+ CheckAllPufferIsReady（） //检查所有的puffer是否都准备好了&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;shedule相关：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;+ InitSchedule（inSchedule） //初始化所有shedule&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ ClearSchedule（inSchedule）清除所有shedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;包组状态相关：&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ GetGroupsDownloadSize（groupIds） //获取多个包组的下载总进度&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ CheckGroupStateAndMount（groupId） //&lt;span style=&quot;font-style: italic;&quot;&gt;检测包组资源状态并尝试&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;mount&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckGroupStateAndMountAndCancelDelete（groupId） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;检测包组资源状态并尝试mount且自动移除删除标记&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;GetChunkGroupState（groupId， bRecheckState） //重新刷新包组信息或不刷新并获取包组状态&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;IsChunkGroupReady（groupId， bRecheckState） //包组是否已经下载完成&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckPak（pakName） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;检查pak包是否存在，以及是否已经mount&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;界面相关：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ShowInMgrGroupsReward（） //下载管理界面是否有未领取的奖励&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ShowInMgrGroupsFinished（） //下载管理界面显示下载任务是否已经全部完成&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ClearShowInMgrGroupsReward（） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;清除下载管理界面任务的奖励状态&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;GetALLMainUIGroup（） //获取主界面UI包组&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckMianUINeedDownload（UIName） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;对应UI是否要下载分包资源&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;GetMainUINeedDownLoadGroup（UIName） //根据UI获取需要下载的pak&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckShowInMgrGroupsDownloadFinish（） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;下载管理界面的任务下载完成的回调&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ReportShowInMgrGroupsDownloadFinish（taskId） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;客户端上报下载任务已完成&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;/font&gt;&lt;/p&gt;&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;RegisterEvent:&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;+ OnSwitchScene():ON_REAL_SWITCH_SCENE&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;+ OnTryReconnect()：Global&lt;span style=&quot;font-size: 14.3pt; white-space: normal; color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space: normal;&quot;&gt;OnGameNetworkTryReconnnect&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;font-size: 14.3pt; white-space: normal;&quot;&gt;+&amp;nbsp;&lt;/span&gt;OnGameServerConnected():OnGameServerConnected&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;+ OnGameServerConnected():ON_PLAYER_AFTER_LOGIN_NTF&lt;/pre&gt;&lt;/div&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;意义不明&lt;/font&gt;：&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;+ GetNonessentialpakGroupCheckInfo（matchTypeId） //获取MatchData非必要包组check信息&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;+ SaveNonessentialpakGroupCheckInfo（matchTypeId， val） //修改MatchData非必要包组check信息&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;+ IsInWaitSceneDownloadChunkGroups（inGroupId）&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-2780" y="460" width="740" height="1340" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-63" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;u&gt;MoePufferConst.E_PufferConnectState&lt;/u&gt;&lt;/span&gt;&lt;b style=&quot;text-decoration-line: underline;&quot;&gt;:Enum&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;当前puffer的状态&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;None = 0,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Wait = 1,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Initialing = 2,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;InitPreSuc = 3,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;WaitReInitialize = 4,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;InitSuc = 5,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Ready = 10,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;InitFailed = 11,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Closed = 12,&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1590" y="970" width="390" height="190" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-64" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakVO&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakName:FString&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakSize: float&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakMd5: FString&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- isStaticPak:bool&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-100" y="140" width="160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-65" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeGameManager&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ChunkGroupManager:ChunkGroupManager&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ MoePakManager&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakNameListFromFeatureName(FString FeatureName)&amp;nbsp; //配置1： 玩法模式表， 配置2： FeatureInfo.json&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-2630" y="-290" width="350" height="130" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-66" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakMergeTask&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（处理pak的合并的具体操作，合并和移动）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ state: 现在正在进行的状态&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;diffPakFile：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;filePath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;diffFileDownloadPath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;pakFileDownloadPath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;mergeFilePath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;pufferMD5：puffer下载下的资源的md5信息&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;errorCode：上一次任务合并失败的原因，失败后会重新下载&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;tickMergeLoopTimeHandle：每0.5s执行一次OnTickMerge的循环定时器&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;taskId：C++端创建的merge任务的id&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoMerge()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;UpdateMerge()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoMoveFile()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoFinished()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoFailed()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;ChangeMergeTaskState(state)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;OnTickMerge&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-180" y="490" width="370" height="360" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-67" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeAssetConst&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field: Type&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method(): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="220" y="170" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-68" value="Pak下载，加载" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=19;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1940" y="2250" width="880" height="250" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-69" value="Puffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1910" y="2314" width="590" height="160" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-70" value="Pak Merge" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1300" y="2320" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-71" value="Pak的校验，解密等" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1300" y="2404" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-72" value="Pak管理器，管理Pak的加载，下载，mount，unmount" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;" parent="1" vertex="1">
          <mxGeometry x="-1940" y="2120" width="880" height="120" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-73" value="Pak的使用方，各玩法，各系统，可以直接去获取pak的状态，mount，unmount pak，也可以通过chunkgroupmanager来访问pak" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="-1940" y="1940" width="640" height="150" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-74" value="下载面板系统" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1930" y="1840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-75" value="MoeGameManager 玩法管理" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1780" y="1840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-76" value="玩法自己的pak管理器&lt;div&gt;MobaPakManager，在玩法内部根据pak的名字去使用pak&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1280" y="1940" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-77" value="系统功能" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1630" y="1840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-78" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupDownloadSchedule&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;（全局唯一，管理包组下载相关信息）&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;_pendingCallbackChangeInfo&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;bInitChunkGroupsCheckStateFinished&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+ CurChunkGroup信息映射&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+CurChunkGroupInfoMap&amp;nbsp; //所有需要下载的包组与包组信息字典&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;PufferNotReadyDownloadGroupIdList&amp;nbsp; //由于puffer还未初始化成功而未开始下载的包组任务&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;WaitSceneDownloadGroupIdList&amp;nbsp; //在该场景下无法下载的包组任务&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;pakRefGroupMap&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+ 自动下载配置&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;resultCalls&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;任务结果注册唯一&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;id&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;progressCalls&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;任务进度回调&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;progressRegisterId&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;任务进度注册唯一&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;id&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;i&gt;serverConnectedTimer&amp;nbsp; //&lt;font color=&quot;#ff0000&quot;&gt;上一次连接上GS的时间？&lt;/font&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(189, 189, 189); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt;&quot;&gt;获取下载信息相关：&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;GetOrCreateGroupDownloadInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;， &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;reCheck&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;） --&lt;/span&gt;&lt;span style=&quot;color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;获取包组资源下载信息，&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic;&quot;&gt;reCheck &lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace;&quot;&gt;刷新状态比较耗时&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208); font-family: 宋体, monospace;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace;&quot;&gt;内部有很多高频的查询状态需求，传&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic;&quot;&gt;false&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace;&quot;&gt;避免不必要的刷新&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;GetIsInAppDownloadInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;group&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;）：包组是否在app中就已经下载完了&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;GetOrCreateChunkGroupInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;）：&lt;/span&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;获取包组信息&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;puffer相关：&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;OnHandlePufferInitSuccess(pufferId, pufferBasePath, pakList, versionPath)&amp;nbsp; //某个pufferinstance初始化成功后的回调，会依次调用&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckDownloadPufferNotReadyChunkGroup()、&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;初始化&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;autoDownloadConfig、&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckAutoDownloadChunkGroup()、&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckMountStaticPaks()&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;、和触发&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;ON_EVENT_UI_DOWNLOAD_RESOURCE_REQ_REFRESH的回调事件&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckPufferNotReadyNeedReturn(inGroupId, inTaskLevel, isAuto)&amp;nbsp; //检查下载该资源的puffer是否准备好了，如果没有准备好就把包组从&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;PufferNotReadyDownloadGroupIdList中删除并重新将包组id和&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;i style=&quot;background-color: initial; color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px;&quot;&gt;inTaskLevel重新加入该列表，并返回true，如果puffer准备好了，就返回false&lt;/i&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;i style=&quot;background-color: initial; color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px;&quot;&gt;+&amp;nbsp;&lt;/i&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;IsPufferReadyByGroupId(inGroupId, failReset)&amp;nbsp; //使用&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;MoeAssetsUtils的接口判断相应的puffer是否准备好了&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;连接服务器相关：&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot;&gt;&lt;i style=&quot;&quot;&gt;&lt;font color=&quot;#85c46c&quot;&gt;OnTryReconnect（）：重新连接后的回调，&lt;/font&gt;&lt;font color=&quot;#ff0000&quot;&gt;关注连接上了什么？&lt;/font&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;OnGameServerConnected（）：连接上服务器的回调&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;span style=&quot;font-size: 19.0667px;&quot;&gt;&lt;i&gt;包组状态相关：&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;span style=&quot;font-size: 19.0667px;&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;IsInitChunkGroupsCheckStateFinished（） //是否还有包组是否需要检测是否需要下载&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;包组下载状态相关：&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;ChangeAutoPauseState（autoPause）：是否把？？？&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-3770" y="1700.5" width="660" height="849.5" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-79" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupMountSchedule&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;（全局唯一，管理包组mount相关信息）&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MountedStaticPaks&amp;nbsp; //静态mount的pak&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;-vUy2ofsnWeSPUeNyJSD&quot;&gt;+&amp;nbsp;MountedGroups&amp;nbsp; //动态mount的pak&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-3960" y="1410" width="390" height="200" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-80" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;PreDownloadInGameApplyModel&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;用于判断资源是否预下载好&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field1: Type&lt;br&gt;+ field2: Type&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1060" y="870" width="260" height="160" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-81" value="&lt;div style=&quot;font-size: 13px; line-height: 100%;&quot;&gt;&lt;pre style=&quot;text-align: center; line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;EMoePakMergeType：Enum&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center; line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;下载后的合并时机&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px; line-height: 100%;&quot;&gt;&lt;div style=&quot;font-size: 13px; line-height: 100%;&quot;&gt;&lt;pre style=&quot;line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;UFUUev-My0rZtlc6DxNT&quot;&gt;  Immediately：下载后立即合并&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 100%;&quot;&gt;&lt;pre style=&quot;line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;UFUUev-My0rZtlc6DxNT&quot;&gt;  Lazy：下载后统一合并&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-1560" y="220" width="260" height="140" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-82" value="&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font face=&quot;Helvetica&quot; style=&quot;font-size: 13px;&quot;&gt;&lt;b&gt;MoeAssetsUtils&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font face=&quot;Helvetica&quot; style=&quot;font-size: 13px;&quot;&gt;&lt;b&gt;提供资源管理相关的适配器，同时提供给外界查找和调用相关信息的接口&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;EventDefine: 事件名映射&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;DiskSpaceUnit: 存储大小&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;__TaskDownloadDefaultOrder：用于设置下载任务的优先级，每有一个下载任务就加一，用于让每个下载任务的优先级都不同&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;__MutexTagId&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;静态方法：&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;DeepCopy(SrcTable): 深拷贝&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;Log(...): log全家桶&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;ProtectTable(t)：&lt;span style=&quot;font-style: italic;&quot;&gt;返回一个只读的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Table&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;，一般用于枚举，读表等情况，防止修改&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;GetAutoDownload()：是否自动下载&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadOnlyWifi()：&lt;span style=&quot;font-style: italic;&quot;&gt;获取&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;onlywifi&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;字段&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;ChangeDownloadOnlyWifi(value)：&lt;span style=&quot;font-style: italic;&quot;&gt;修改&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;onlywifi&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;字段&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;IsWifi()：&lt;span style=&quot;font-style: italic;&quot;&gt;检测是否为&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;wifi&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;环境&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;IsEditor(bUseForceDownload)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetPufferKeyByGroupId(groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckPufferIsReadyByGroupId(pakMgr, groupId, failReset)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;再通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;是否初始化完成&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;IsPufferInitialingByGroupId(pufferMgr, groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;再通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;是否初始化完成&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckPufferIsInitialingByGroupId(pakMgr, groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;判断&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;是否正在初始化&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckPufferIsReadyByPakName(pakMgr, pakName, failReset)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;CheckIsInAPP(groupId)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDefaultDownloadInfo(groupId)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadPriority(taskLevel)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetRecaculatePriority(oldPriority, newTaskLevel)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadPriorityByOrder(priority, newTaskLevel)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadOldTaskLevel(oldPriority)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;UpdateCacheJson(basePath, key, val)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;SaveCacheJson(basePath, table)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetCacheJson(basePath)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetChunkGroupConfigState(basePath, groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;获取本地缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckChunkPuffersIsBusy()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;IsForceOpenPufferDownload()：&lt;span style=&quot;font-style: italic;&quot;&gt;静默资源包下载完毕&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;ForceAutoGroupDownloadDone()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+ ......&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1060" y="160" width="680" height="700" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-83" value="&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;EMoeChunkGroupDownloadTaskPriorityLevel：Enum&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center; line-height: 9.6px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;下载优先级&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;Helvetica&quot;&gt;Avatar_Shop = 1&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Avatar_Local = 2&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Team = 3&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Normal = 4&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Avatar_Other = 5&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Auto = 6&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-1380" y="-360" width="405" height="220" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-84" value="&lt;pre style=&quot;font-size: 13px; text-align: center; line-height: 140%;&quot;&gt;&lt;font style=&quot;background-color: rgb(255, 255, 255);&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkCommonDefine&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;blockquote style=&quot;margin: 0px 0px 0px 40px; border: none; padding: 0px; line-height: 140%;&quot;&gt;&lt;pre&gt;&lt;span style=&quot;font-size: 13px; line-height: 140%;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;ChunkDownLoadCacheFileName = &quot;fef7f7499fe44f1b5e030c0ab9beca84&quot;,  --资源cache信息目录&lt;br&gt;PufferRootPath = StartUpPufferConf.PufferRootPath,&lt;br&gt;MD5JsonFileName = StartUpPufferConf.MD5JsonFileName, -- 存储下载状态Json文件名&lt;br&gt;PlayLabelPlatformKey = &quot;platform&quot;,&lt;br&gt;PlayLabelIOSName = &quot;IOS&quot;,&lt;br&gt;PlayLabelAndroidName = &quot;Android&quot;,&lt;br&gt;DefaultPufferName = StartUpPufferConf.DefaultPufferName,&lt;br&gt;DiffLimitDeviceLevel = 4,&lt;br&gt;DiffLimitSize = 1000,&lt;br&gt;ChunkGroupStateTickCount = 8, -- 每一帧检测几个包组&lt;br&gt;DownloadMaxLimit = 6,&lt;br&gt;DownloadPerLimit = 3,&lt;br&gt;BasePriorityMulRatio = 100000000,&lt;br&gt;SimpleDownloadLimit = 10 * 1024 * 1024,&lt;br&gt;-- DefaultVersion Json&lt;br&gt;DefaultVersionJsonFilePath = &quot;Content/LetsGo/Script/StartUp/Config/Version.json&quot;,&lt;br&gt;DontDownloadGroupFileName = &quot;f26742340f61a9c07dc1eba8959aa34f&quot;, -- Dontdownloadfile&lt;br&gt;&lt;br&gt;&lt;br&gt;OldMD5JsonFileName = &quot;50ff1780358c438a1efc10302ec73bf1&quot;,&lt;br&gt;OldMoePufferPathFileName = &quot;%50%75%66%66%65%72&quot;, -- s8之前的主puffer目录&lt;br&gt;OldFeaturePufferPathFileName = &quot;%50%75%66%66%65%73&quot;, -- s8之前的副玩法puffer目录&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/blockquote&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-2150" y="-320" width="710" height="490" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-85" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoePufferCommonUtils&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;puffer使用的关于下载、缓存、任务回调相关的适配器&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;EventCallBackMap&lt;/span&gt;：function puffer回调事件&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+ field2：类型&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;FetchDownloadDefaultOrder&lt;/span&gt;（int）：获取当前任务的优先级，默认为上一个+1&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;RemoveExtraFiles&lt;/span&gt;（Type， Type）：删除多余pak&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetPakPlatformName ：获取平台后缀&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMaxTaskLimit ： 获取最大任务数量&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckFileIsReady（bool）&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;：文件是否准备好，本地与puffer一致&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;LoadMd5CacheInfo ： 加载本地MD5缓存&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;SaveMD5CacheFileInfos ： 下载完后更新一些本地md5缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;SaveMD5CacheInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载完后更新单个本地md5缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;SaveMD5CacheInfoByMd5 ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载完后更新单个本地md5缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;RemoveMD5CacheInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;清除指定文件的缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMD5CacheInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取本地缓存md5信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetSortedDownloadTasksInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取并排序下载任务的优先级&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetDownloadTaskMutexTagList&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetAvailableDownloadTaskMutexTag ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;查询是否有可用的mutexTag&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ChangeMaxSpeedDownload&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetSourceChunkName&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;IsInContentBasePak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;DeepCopy&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;color: rgb(106, 153, 85); background-color: rgb(30, 30, 30); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;color: rgb(220, 220, 170); background-color: rgb(30, 30, 30); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="270" y="1360" width="490" height="410" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-86" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoePufferConst&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;puffer相关的枚举&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;RetryMaxCnt = 2,            &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;重试次数&lt;br&gt;&lt;/span&gt;MaxParallelTask = 10,        &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;并行下载上限&lt;br&gt;&lt;/span&gt;MaxDownloadsPerTask = 3,    &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;单个任务下载上限&lt;br&gt;&lt;/span&gt;BaseFPufferTagVal = 1000,   &lt;span style=&quot;font-style: italic;&quot;&gt;-- PufferTag&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;偏移基础值&lt;br&gt;&lt;/span&gt;DownloadTaskRetryLimit = -1, &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;下载任务失败重试次数&lt;br&gt;&lt;/span&gt;DownloadFinishFileNotExistsWaitFrame = 2,&lt;br&gt;DownloadFinishFileNotExistsRetryLimit = 5,&lt;br&gt;MergeResultFileSuffix = &quot;merge&quot;,&lt;br&gt;PufferPathFileBaseName = &quot;%50%75%66%66%65%74&quot;,&lt;br&gt;DefaultPufferName = &quot;Default&quot;,&lt;br&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;---&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;下面的路径看看要不要外部传入&lt;br&gt;&lt;/span&gt;DefaultChunkPakListfile = &quot;FileList/ChunkPakListfile.json&quot;,&lt;br&gt;ChunkPakListfile = &quot;FileList/FeatureChunkPakListfile.json&quot;,&lt;br&gt;ChunkPakVersionfile = &quot;FileList/FeatureVersionJson.json&quot;,&lt;br&gt;DiffListfilePath = &quot;FileList/DiffListfile.json&quot;,&lt;br&gt;MD5JsonFileName = &quot;50ff1780358c438a1efc10302ec73bf2&quot;, &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;存储下载状态&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Json&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;文件名&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;InAppPakListFileName = &quot;Flag/apppaklistfile.json&quot;, &lt;span style=&quot;font-style: italic;&quot;&gt;--&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;打进底包的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;目录&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1090" y="910" width="610" height="390" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-87" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupMountSchedule&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;统一进行包组的mount与unmount操作&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Owner&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;PakManager&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoePakManager&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountedStaticPaks&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountedGroups  --以groupid为key，已mount的包组的value大于0&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckMountStaticPaks &lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;检测并mount默认（静态）mount的包组，该函数是不是会多次执行？&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountGroup&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Mount包组中的所有pak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UnMountGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UnMount包组中的所有pak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;IsMounted&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UnMountAllGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ignoreGroupList&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ignoreGroupList为&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;不会被unmount的列表&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountGroups&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GroupIds&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMountedGroups&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4490" y="350" width="470" height="320" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-88" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupSceneSchedule&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;b&gt;执行切换场景是与chunk相关的任务&lt;/b&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;所有者&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px; white-space: pre;&quot;&gt;&lt;font face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;sceneDownloadType  //&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnSwitchScene&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;sceneName&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;）：&lt;/span&gt;类型&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;InDownloadScene&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;downloadScene&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;）：&lt;/span&gt;类型&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetDownloadSceneType&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;sceneName&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;）：当前要眺转到哪个场景，&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;据此判断需要mount的包&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4570" y="770" width="470" height="170" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-89" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupShaderSchedule&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;&lt;b&gt;负责执行chunk发生改变时，需要对shader做的操作&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;owner&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ReloadShaderCode&lt;/span&gt;（）：每次mount包组后都需要重新&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;加载ShaderLib&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;font face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;+&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt; &lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;LgHsMGE7hj-lfj-5sVJT&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnHandleReloadShader（）：需要重新加载shader，目前只有&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ReloadShaderCode&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4575" y="1000" width="480" height="140" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-90" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupUISchedule&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;执行UI界面的下载任务，UI为什么要单独列一个schedule？&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;owner&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+ field2：类型&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetShowInMgrGroups &lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取所有在下载管理界面显示的下载包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ShowInMgrGroupsDownloading &lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载管理界面是否有下载中的包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ShowInMgrGroupsNeedDownload ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载管理界面是否有未下载完成的包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckShowInMgrGroupsDownloadState ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;任务下载完成时，重新检测一下对应的下载管理任务&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetGroupTabid ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取资源包的tab id&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetGroupDownloadState&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取资源包的下载状态&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GotoAndDownloadGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupIds&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;开始下载并跳转到指定group&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckMainUIResource&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UIName&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;主界面UI 分包检测&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetALLMainUIGroup ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取主界面UI包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckMainUINeedDownload&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UIName&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;对应UI是否要下载分包资源&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMainUINeedDownLoadGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UIName&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取UI要下载的分包ID&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnLoginDoneHandler&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckShowInMgrGroupsDownloadFinish&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ReportShowInMgrGroupsDownloadFinish&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;taskId&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;客户端上报下载任务已完成&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnUpdate&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;deltaTime&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4670" y="1300" width="640" height="370" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-91" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.463;exitY=0.993;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.004;entryY=0.398;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-87" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-92" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-88" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3400" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-93" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.007;entryY=0.404;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-89" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-94" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=-0.008;entryY=0.414;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-90" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-95" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.02;entryY=0.396;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-78" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3390" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-96" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.01;entryY=0.406;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-79" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-97" value="&lt;font style=&quot;font-size: 17px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;各个shedule作为MoeChunkManager的各功能模块具体执行的部分&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;font-size: 17px;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot; face=&quot;GLNBJ8kfbzAfBnB0zOgq&quot;&gt;&lt;b&gt;为MoeChunkManager作为各shedule对外的装饰器&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-3980" y="740" width="530" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-99" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;ChunkDownloadWhiteListTable&lt;/i&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;与下载相关的表&lt;/i&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field1：类型&lt;br&gt;+ field2：类型&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font&gt;+ GetChunkDownloadWhiteListDataById(id)：获取ChunkDownloadWhiteListData完整表格(包含所有分表）&lt;/font&gt;&lt;br&gt;+ method2（Type， Type）：类型&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-4910" y="780" width="290" height="250" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-100" value="&lt;font&gt;下载下载列表中所有资源的按钮&lt;/font&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;下载F-分包中所有&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;显示的资源&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-4380" y="1859" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-101" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;UI_EditorApp_Down:OnClickedBtnMax&lt;span style=&quot;color:#bdbdbd;&quot;&gt;()&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;或&lt;/span&gt;function &lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse; color: rgb(189, 189, 189);&quot;&gt;UI_Resource_Down_SubView&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse; color: rgb(57, 204, 155);&quot;&gt;OnClickedBtnMax&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse; color: rgb(189, 189, 189);&quot;&gt;()&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-4520" y="1890" width="530" height="120" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-102" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;/p&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;i&gt;MoePakConst.&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;i style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;E_PakMergeState&lt;/b&gt;&lt;/i&gt;&lt;/div&gt;&lt;b&gt;正在进行的merge的状态&lt;/b&gt;&lt;p&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Invalid: 任务还在创建中&lt;br&gt;+ Wait: 等待中&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Merge：lua端在等待C++中的合并结果&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Move：将旧的.pak和旧的.diff删除，并且让新生成的.pak移动正确的目录 刷新相关本地md5信息&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Finished：完成&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Failed：merge失败 or Move 失败的回调(删除旧的.pak 和.diff)&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="220" y="300" width="380" height="190" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-103" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoePakConst.EMoeHDiffPatchERR&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ None：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;Failure：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;NotExist：&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="230" y="530" width="360" height="90" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-104" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoePakConst.EPakMergeErrorCode&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;None：正常完成merge，没有出错&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;TaskIDErr： 创建C++端merge任务出错&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;NotExist：&amp;nbsp;filePath、diffFilePath或mergeFilePath路径不存在&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;MoveErr：C++端删除原&lt;span style=&quot;background-color: initial;&quot;&gt;filePath、&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;diffFilePath目录和迁移&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;mergeFilePath中文件至&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;filePath出错&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="640" y="300" width="333" height="170" as="geometry" />
        </mxCell>
        <mxCell id="CVZIYWeQVlYECD098r73-5" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoeChunkCommonDefine.ChunkGroupInfo&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;包组信息&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Id&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Type：全是game&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;ChunkGroup：包组中有那些pak&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;State ：（MoeChunkCommonDefine.DownloadState）下载状态，初始时默认下载完成&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadInfo：MoeChunkCommonDefine.GroupDownloadInfo&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;StartTimeStamp：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;IsContinue：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;NeedUpdateDownloadInfo：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;NeedUpdateChunkGroup：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;IsInApp：是否是底包&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadScene：可下载场景，目前有1和0&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-2670" y="-55" width="490" height="245" as="geometry" />
        </mxCell>
        <mxCell id="NEnujJ8a_sMzc4M2gyq3-1" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoeChunkCommonDefine.GroupDownloadInfo&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;包组的下载信息&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadState：（MoeChunkCommonDefine.DownloadState）包组下载状态&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;AutoDownload：是否自动下载&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;AutoPause：是否自动暂停&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadSize：下载尺寸&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadProgress：下载进度&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;HasInited：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;bDeleteAfterReboot：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;initDownloadSize：本次启动游戏时已下载的尺寸&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-3150" y="-55" width="430" height="195" as="geometry" />
        </mxCell>
        <mxCell id="gM0Yo6t7S06c2ELCtehT-1" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MoePufferConst.Struct_PakVO&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;pak信息&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;PakName = &quot;&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;PakDownloadSize = 0,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;PakSize = 0,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;PakMd5 = &quot;&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;IsStaticPak = false,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;DiffFilePath = nil,&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1590" y="1230" width="440" height="200" as="geometry" />
        </mxCell>
        <mxCell id="F1mO1bZQWxSpjxNWzKo9-5" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;MoePufferConst.Struct_PakVersion&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center; font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;pak版本信息&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;Version = &quot;&quot;,&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 17px;&quot;&gt;PakVO = {},即&lt;/font&gt;&lt;font style=&quot;font-size: 14px;&quot; face=&quot;Helvetica&quot;&gt;Struct_PakVO集合&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;PufferId = 0,&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1590" y="1510" width="360" height="210" as="geometry" />
        </mxCell>
        <mxCell id="UDY_l5OlAWDBtcjw9-Gh-1" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MoePufferConst.E_PufferDownloadTaskState&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;puffer下载状态&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;None = 0,&lt;br&gt;InitFinish = 1,&lt;br&gt;Wait = 2,&lt;br&gt;Downloading = 3,&lt;br&gt;Pause = 4,&lt;br&gt;DownloadFinish = 5,&lt;br&gt;Finish = 8,&lt;br&gt;Stop = 9,&lt;br&gt;DownloadNext = 10,&lt;br&gt;Failed = 11,&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1190" y="1460" width="290" height="270" as="geometry" />
        </mxCell>
        <mxCell id="DLLMdAQymE6rQFqvrl38-2" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MoeChunkCommonDefine.GroupState&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;包组下载状态，非下载任务获取到的包组状态&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;Invalid = -1,   &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;非法状态&lt;br&gt;&lt;/span&gt;Finish = 0,     &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组已经下载完成&lt;br&gt;&lt;/span&gt;Update = 1,     &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组需要进行更新&lt;br&gt;&lt;/span&gt;Download = 2,   &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组需要进行下载&lt;br&gt;&lt;/span&gt;Continue = 3,   &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组需要继续进行下载&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-850" y="1340" width="310" height="180" as="geometry" />
        </mxCell>
        <mxCell id="DLLMdAQymE6rQFqvrl38-3" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MoeChunkCommonDefine.DownloadState&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组未进行下载（不在下载任务中）&lt;br&gt;&lt;/span&gt;Continue = -3,   &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组需要继续进行下载&lt;br&gt;&lt;/span&gt;Update = -2,     &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组需要进行更新&lt;br&gt;&lt;/span&gt;Download = -1,   &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组需要进行下载&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;None = 0,       &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;初始默认状态&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组开启下载&lt;br&gt;&lt;/span&gt;Wait = 1,       &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组下载等待中&lt;br&gt;&lt;/span&gt;Ing = 2,        &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组下载中&lt;br&gt;&lt;/span&gt;Finish = 3,     &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组已经下载完成&lt;br&gt;&lt;/span&gt;Pause = 4,      &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组下载暂停&lt;br&gt;&lt;/span&gt;Fail = 7,       &lt;span style=&quot;font-style: italic;&quot;&gt;-- &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;包组下载失败&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-850" y="1550" width="390" height="276" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="2fqrkcU58JlsNUXktSsU" name="类与数据结构C++端">
    <mxGraphModel dx="1842" dy="1042" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="e6tWidkBm4qySlVObS0_-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;IMappedFileRegion&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field1: Type&lt;br&gt;+ field2: Type&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="210" y="240" width="190" height="140" as="geometry" />
        </mxCell>
        <mxCell id="e6tWidkBm4qySlVObS0_-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;IMappedFileHandle&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;文件句柄&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field1: Type&lt;br&gt;+ field2: Type&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="10" y="480" width="230" height="220" as="geometry" />
        </mxCell>
        <mxCell id="e6tWidkBm4qySlVObS0_-3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;FIOSMappedFileHandle&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;IOS文件句柄&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;MappedPtr&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(108, 149, 235);&quot;&gt;const &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;uint8&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;*&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Filename&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;FString&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;NumOutstandingRegions：&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;int32元梦IOS独有的引用计数，用于记录该文件被哪些文件引用，比如一个pak被pak里面的资源引用，只有当资源全部被解引用时，pak的该值才能为0&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Alignment：&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;int32&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;FileHandle：&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(108, 149, 235); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;int&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;color: rgb(108, 149, 235); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;MappedFilesname：&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;TArray&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;FString&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;&amp;gt;pak中还被引用的资源的文件名&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;UnMap&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;FIOSMappedFileRegion&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;* &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Region&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(108, 149, 235); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;void被引用者调用引用者的该方法已解引用，主要就是&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;NumOutstandingRegions&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;--，在析构函数中被调用&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="650" y="30" width="570" height="490" as="geometry" />
        </mxCell>
        <mxCell id="e6tWidkBm4qySlVObS0_-5" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="e6tWidkBm4qySlVObS0_-2" target="e6tWidkBm4qySlVObS0_-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-50" y="730" as="sourcePoint" />
            <mxPoint y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e6tWidkBm4qySlVObS0_-6" value="派生" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="425" y="488" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e6tWidkBm4qySlVObS0_-7" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#c191ff;&quot;&gt;FMappedFileHandleWindows&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#c191ff;&quot;&gt;win文件句柄&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;color: rgb(102, 195, 204); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;Handle&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(193, 145, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;HANDLE&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;color: rgb(193, 145, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: rgb(102, 195, 204); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;MappingHandle：&lt;/span&gt;&lt;span style=&quot;color: rgb(193, 145, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;HANDLE&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;color: rgb(193, 145, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: rgb(102, 195, 204); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;DebugFilename：&lt;/span&gt;&lt;span style=&quot;color: rgb(193, 145, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;FString&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(102, 195, 204); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;NumOutstandingRegions&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(193, 145, 255); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;int32&amp;nbsp; 引用计数，与IOS的相同&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="610" y="580" width="520" height="250" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="cc5ZF6h4ICKkNvJx_7M4" name="merge开始与失败的流程">
    <mxGraphModel dx="2015" dy="651" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Mw96nbkPMHBybhn6pct--1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePakManager&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="60" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--3" target="Mw96nbkPMHBybhn6pct--8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MergePakFile&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="414" y="290" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--5" target="Mw96nbkPMHBybhn6pct--3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;PreparePakLoader&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="290" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--6" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePakLoader&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1110" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--8" target="Mw96nbkPMHBybhn6pct--12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--8" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;StartMerge&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1110" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--9" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePakMergeTask&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1620" y="60" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--12" target="Mw96nbkPMHBybhn6pct--14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.004;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Mw96nbkPMHBybhn6pct--12" target="Mw96nbkPMHBybhn6pct--52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1635" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--12" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;StartMerge&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1430" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--14" target="Mw96nbkPMHBybhn6pct--19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--14" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Merge)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1582.5" y="440" width="225" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1900" y="600" />
              <mxPoint x="1900" y="660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1900" y="600" />
              <mxPoint x="1900" y="780" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--19" value="OnUpdateMergeTaskStateLogic&lt;div&gt;策略模式&lt;/div&gt;&lt;div&gt;根据不同的状态进行不同的操作&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1602.5" y="570" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--21" target="Mw96nbkPMHBybhn6pct--34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--21" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.NotExist)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2020" y="450" width="292" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--22" value="检查diffFilepath、filePath&lt;div&gt;以及这两个目录是否有存在&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1830" y="430" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--23" value="不存在直接返回失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2025" y="418" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--24" value="UE4.UMoeHDiffPatchHelper.MergeDiff_CheckMD5" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2030" y="630" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--25" value="创建文件合并后写入的目录&lt;div&gt;mergeFilePath =&amp;nbsp;&lt;/div&gt;&lt;div&gt;string.format(&quot;%s.%s&quot;, filePath, MoePakConst.MergeResultFileSuffix)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2020" y="535" width="390" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--26" value="调用UE接口&lt;div&gt;创建合并任务的ID&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2320" y="640" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--28" target="Mw96nbkPMHBybhn6pct--34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--28" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.TaskIDErr)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2035" y="750" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--29" value="如果任务id&amp;lt;=0，&lt;div&gt;就说明任务创建失败&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1900" y="733" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--30" value="&lt;div&gt;self.diffFilePath = diffFilepath&lt;/div&gt;&lt;div&gt;self.filePath = filePath&lt;/div&gt;&lt;div&gt;self.mergeFilePath = mergeFilePath&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2056" y="870" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.001;entryY=0.662;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1900" y="600" />
              <mxPoint x="1900" y="910" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--32" value="任务创建成功&lt;div&gt;设置相关变量信息&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2280" y="880" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--34" target="Mw96nbkPMHBybhn6pct--36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--34" value="ChangeMergeFailed" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2590" y="600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--36" target="Mw96nbkPMHBybhn6pct--39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--36" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Failed)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2525" y="770" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--37" value="设置本次合并失败的原因&lt;div&gt;并且调用一下方法&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2640" y="690" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--39" target="Mw96nbkPMHBybhn6pct--43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--39" value="OnUpdateMergeTaskStateLogic" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2545" y="890" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3040" y="920" />
              <mxPoint x="3040" y="1140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--43" value="DoFailed" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2850" y="890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--44" value="删除diffFilePath、filePath、mergeFilePath目录" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3030" y="800" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.36;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--46" value="MoeAssetsUtils" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3480" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--47" value="RemoveMD5CacheInfo&lt;div&gt;(self.diffPakFile)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3475" y="890" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3120" y="1020" as="sourcePoint" />
            <mxPoint x="1270" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--49" value="OnMergeResultCallBack" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3120" y="973" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--50" value="执行结束后的回调" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3050" y="950" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--51" value="RemoveMergeLoopTimeHandle" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3105" y="1110" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--52" value="&lt;div&gt;添加循环定时器，每0.5s执行一次&lt;/div&gt;OnTickMerge" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1690" y="180" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--53" value="&lt;font color=&quot;#ff0000&quot;&gt;为什么要每0.5s执行一次？&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;我认为是此处不需要太过频繁地检测当前merge的过程进行到哪一步了&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1630" y="225" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--54" value="取消循环定时器" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3050" y="1080" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--56" target="Mw96nbkPMHBybhn6pct--61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--56" value="OnHandlePakMergeNotify&lt;div&gt;(errorCode,inPakName,diffPakName)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1070" y="973" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--57" value="MoePufferInstance" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-340" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--58" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MarkDiffFileSuc&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-340" y="1100" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="Mw96nbkPMHBybhn6pct--58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="Mw96nbkPMHBybhn6pct--64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="vrY5v6D_-oa1d8lEZZJY-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="vrY5v6D_-oa1d8lEZZJY-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="vrY5v6D_-oa1d8lEZZJY-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="vrY5v6D_-oa1d8lEZZJY-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="1160" as="sourcePoint" />
            <mxPoint x="875" y="1430" as="targetPoint" />
            <Array as="points">
              <mxPoint x="670" y="1161" />
              <mxPoint x="870" y="1161" />
              <mxPoint x="870" y="1430" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--61" value="如果errorCode ==&amp;nbsp;&lt;div&gt;MoePakConst.EPakMergeErrorCode.None&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="530" y="1140" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--62" value="if self.PufferInstance" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="1130" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--64" target="Mw96nbkPMHBybhn6pct--67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--64" value="ChangeLoaderState&lt;div&gt;(EMoePakLoaderState.MergeFailed)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="1080" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--67" target="Mw96nbkPMHBybhn6pct--68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--67" target="Mw96nbkPMHBybhn6pct--70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--67" value="OnDealChangeLoaderState(MergeFailed)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1160" y="1080" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--68" value="StatusCallBack&lt;div&gt;(self.PakName, oldLoaderStatus, newState)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1665" y="1130" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--69" value="返回true，&lt;div&gt;说明确实需要切换状态&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="1070" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--70" value="&lt;div&gt;设置旧的state和新的statue&lt;/div&gt;&lt;div&gt;local oldLoaderStatus = self.LoaderState&lt;/div&gt;&lt;div&gt;self.LoaderState = newState&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1665" y="1040" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-1" value="如果是None，&lt;div&gt;就说明merge成功了&lt;/div&gt;&lt;div&gt;，可以准备mount了&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="395" y="1103" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;ChangeLoaderState&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-weight:bold;font-style:italic;&quot;&gt;EMoePakLoaderState&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;MountPrepared&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry y="1220" width="410" height="110" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-4" value="否则就是失败了" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="725" y="1118" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;TryDeleteFile&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="970" y="1170" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-7" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ChangeLoaderState&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;EMoePakLoaderState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;DownloadPrepared&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="970" y="1260" width="390" height="100" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-9" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ReStartDownloadTask&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="985" y="1400" width="205" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="y3ZbnNyZqMStZnKh7AQm" name="merge循环定时器流程">
    <mxGraphModel dx="1247" dy="789" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="tRXEKPltOArOnr-kAwEP-1" value="MoePakMergeTask" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-3" target="tRXEKPltOArOnr-kAwEP-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-3" value="OnTickMerge" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-4" value="如果self.state ~= MoePakConst.E_PakMergeState.Merge&lt;div&gt;就直接return，说明merge还未开始或者以及结束&lt;/div&gt;&lt;div&gt;不执行以下操作&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="120" y="180" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.667;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="570" y="160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.447;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="570" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="540" y="280" />
              <mxPoint x="540" y="118" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-9" value="UpdateMerge" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="354" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-10" value="result = UE4.UMoeHDiffPatchHelper.GetMergeResult(self.taskId)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="600" y="60" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-11" value="根据任务id从C++端获取当前合并任务的执行结果" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="600" y="20" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-12" value="如果result == MoePakConst.EMoeHDiffPatchERR.Failure&lt;div&gt;说明merge还在进行中？直接return&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="630" y="100" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-13" value="如果result == MoePakConst.EMoeHDiffPatchERR.None&lt;div&gt;并且mergeFilePath目录存在，说明merge成功&lt;/div&gt;&lt;div&gt;开始move&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="600" y="170" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-15" target="tRXEKPltOArOnr-kAwEP-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-15" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Move)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="900" y="200" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-16" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.NotExist)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="720" y="340" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-17" value="否则说明merge失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="590" y="340" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-19" target="tRXEKPltOArOnr-kAwEP-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-19" value="OnUpdateMergeTaskStateLogic" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1241" y="200" width="189" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1510" y="370" />
              <mxPoint x="1510" y="400" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-23" value="DoMoveFile" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1276" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-24" value="先判断diffFilePath和filePath是否存在，&lt;div&gt;如果不存在&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1396" y="283" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-25" value="ChangeMergeFailed(MoePakConst.EPakMergeErrorCode.NotExist)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1650" y="290" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-26" value="&lt;div&gt;删除本地存储目录和下载patch文件目录下的文件和将合并后的文件移到本地存储目录&lt;/div&gt;&lt;div&gt;local retDelOldFile = UE4.USPLuaUtility.DeleteFile(self.filePath)&lt;/div&gt;&lt;div&gt;local retDelDiffFile = UE4.USPLuaUtility.DeleteFile(self.diffFilePath)&lt;/div&gt;&lt;div&gt;local retMoveFile = UE4.UMoeReplayBPFunctionLibrary.MoveFile(self.mergeFilePath, self.filePath)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1600" y="365" width="550" height="70" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-30" target="tRXEKPltOArOnr-kAwEP-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-30" target="tRXEKPltOArOnr-kAwEP-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-30" target="tRXEKPltOArOnr-kAwEP-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-30" value="如果if retDelOldFile and retDelDiffFile and retMoveFile" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1620" y="488" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.003;entryY=0.545;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-32" value="MoeAssetsUtils" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2495" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-33" value="RemoveMD5CacheInfo&lt;div&gt;(self.diffPakFile, false)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2465" y="420" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-34" value="SaveMD5CacheInfo(self.pakFile, self.pufferMD5, self.filePath)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2460" y="555" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-36" target="tRXEKPltOArOnr-kAwEP-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-36" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Finished)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2068" y="660" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-37" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.MoveErr)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1610" y="615" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-38" value="否则就是在删除文件&lt;div&gt;或者move操作中出错了&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1475" y="593" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-40" target="tRXEKPltOArOnr-kAwEP-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-40" value="OnUpdateMergeTaskStateLogic" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2107" y="780" width="182" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-43" target="tRXEKPltOArOnr-kAwEP-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-43" target="tRXEKPltOArOnr-kAwEP-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-43" value="DoFinished" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1840" y="780" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-44" value="OnMergeResultCallBack&lt;div&gt;(MoePakConst.EPakMergeErrorCode.None, self.pakFile, self.diffPakFile)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1398" y="710" width="256" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-45" value="RemoveMergeLoopTimeHandle" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1411" y="850" width="189" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-46" value="执行merge完成后的回调" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1615" y="708" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-47" value="删除循环计时器" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1600" y="840" width="110" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="UyM8k2Oa14alGE7s-cyv" name="下载信息的初始化与下载任务的创建">
    <mxGraphModel dx="2448" dy="2086" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="5cEbv5X1kibHwalH5eq4-1" value="MoeChunkGroupManager" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-330" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-2" target="5cEbv5X1kibHwalH5eq4-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-2" value="StartDownloadGroupList" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="250" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-3" value="下载一堆包组，&lt;div&gt;一般用于下载显示在下载界面的所有包组&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-20" y="190" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-4" value="MoeChunkGroupDownloadSchedule" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="-330" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="5cEbv5X1kibHwalH5eq4-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="DKOrTGj42sUnfdID28H5-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-5" value="StartDownloadGroupList" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="250" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="5cEbv5X1kibHwalH5eq4-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="EBJCk_LxA7f1i_R0lV7n-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="zegwxUL89KQ7tsU-fR5h-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-6" value="GetOrCreateGroupDownloadInfo&lt;div&gt;(groupId, reCheck)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="710" y="170" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-9" value="遍历每一个包组&lt;div&gt;先获取包组的下载信息&lt;/div&gt;&lt;div&gt;包括当前处于哪一种下载状态和&lt;div&gt;还需要下载的多大&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="530" y="123" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-10" value="reCheck&#39;为false，&lt;div&gt;就可以略过很多高耗时的操作&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;我认为这些高耗时的操作主要是获取&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;已下载文件的大小&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="710" y="70" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-11" value="GetOrCreateChunkGroupInfo(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="40" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-13" value="首先获取包组信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="970" y="38" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="rArM3rnajTcCenrp1fIl-2" target="rArM3rnajTcCenrp1fIl-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-2" value="GetChunkGroupConfigItem(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-92" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="rArM3rnajTcCenrp1fIl-4" target="rArM3rnajTcCenrp1fIl-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1535" y="-60" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-4" value="如果self.CurChunkGroupInfoMap[groupId]==nil&lt;div&gt;说明还未初始化过该包组的下载信息&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="-15" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.375;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-11" target="rArM3rnajTcCenrp1fIl-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-7" value="先获取F-分包表中相应包组的信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1340" y="-92" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-8" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="680" as="sourcePoint" />
            <mxPoint x="380" y="-390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-9" value="GetChunkGroupConfigMap" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-220" y="-92" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-11" value="直接返回self.CurChunkGroupConfigMap&lt;div&gt;即F-分包表中的数据&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-280" y="-30" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-12" value="返回F-分包表中相应包组的数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="85" y="-22" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OkrL8AyqHjBuT8yEN-5--1" value="group = _MOE.Utils.CommonUtils:DeepCopy(MoeChunkCommonDefine.ChunkGroupInfo)&lt;div&gt;&lt;div&gt;group.NeedUpdateChunkGroup = true&lt;/div&gt;&lt;div&gt;group.NeedUpdateDownloadInfo = true&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1760" y="-107" width="500" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OkrL8AyqHjBuT8yEN-5--2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.646;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="rArM3rnajTcCenrp1fIl-4" target="OkrL8AyqHjBuT8yEN-5--1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OkrL8AyqHjBuT8yEN-5--3" value="深拷贝一份包组信息，之后进行赋值和修改后存入CurChunkGroupInfoMap" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1800" y="-130" width="420" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-1" target="EgfYHaSXt62NNEBrkIG0-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-1" value="如果group.NeedUpdateChunkGroup需要更新包组信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="55" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.009;entryY=0.501;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-11" target="EgfYHaSXt62NNEBrkIG0-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-3" target="EgfYHaSXt62NNEBrkIG0-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-3" value="IsPufferReadyByGroupId(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1800" y="40" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-5" value="MoeAssetsUtils" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2550" y="-330" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EBJCk_LxA7f1i_R0lV7n-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-6" value="CheckPufferIsReadyByGroupId" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2520" y="40" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-8" value="通过groupId获取到对应featureName&lt;div&gt;再通过featureName获取到对应puffer是否初始化完成&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2450" y="-22" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-10" value="如果MoeAssetsUtils.IsEditor(true)，在编辑器中就直接return true" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2860" y="-122" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.452;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EgfYHaSXt62NNEBrkIG0-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-12" value="&lt;font color=&quot;#ff0000&quot;&gt;为什么编辑器中默认每个puffer都已准备好了？&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3125" y="-140" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-13" value="如果pakMgr:CheckAllPufferIsReady()所有puffer都已准备好，也直接return true" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2868" y="-60" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.333;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EgfYHaSXt62NNEBrkIG0-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-1" value="如果local groupConf = _MOE.Config.ChunkGroupData:GetDataByKey(groupId)为nil，&lt;div&gt;没有包组信息也返回nil，没有包组信息，后续也不会下载&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2870" y="-15" width="480" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.375;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EBJCk_LxA7f1i_R0lV7n-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-3" value="如果pakMgr:CheckPufferIsReadyByChunkName(chunkName)为nil，&lt;div&gt;某一个pak需要的puffer初始化失败返回false，&lt;/div&gt;&lt;div&gt;但如果dailReset为true，初始化失败需要重新初始化，&lt;/div&gt;&lt;div&gt;pakMgr:ResetPufferByChunkName(chunkName)重新初始化，但结果仍然返回false&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2870" y="38" width="460" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-5" value="否则，如果每一个pak对应的puffer都初始化成功&lt;div&gt;就返回true&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2870" y="140" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EBJCk_LxA7f1i_R0lV7n-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-7" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2420" y="440" as="sourcePoint" />
            <mxPoint x="2420" y="-450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-9" value="如果有puffer没有准备好，就直接返回包组信息，&lt;div&gt;不再进行一下操作，但此时信息中的ChunkGroup为空，没有pak的信息&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1710" y="113" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="EBJCk_LxA7f1i_R0lV7n-10" target="rArM3rnajTcCenrp1fIl-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2330" y="235" />
              <mxPoint x="2330" y="-160" />
              <mxPoint x="330" y="-160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-10" value="local configItem =&amp;nbsp;self.Owner:GetChunkGroupConfigItem(groupId)&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1715" y="215" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-12" value="&lt;div&gt;在pakRefGroupMap[pak]中添加groupId表示该pak在这个包组中有&lt;/div&gt;&lt;div&gt;group.ChunkGroup中添加pak，表示包组中有这个pak&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;self.__diffCacheFileTotalSize[pak] = nil目前不理解这个啥意思&lt;/font&gt;&lt;/div&gt;&lt;div&gt;group.NeedUpdateChunkGroup = false以及更新过包组中有哪些包的信息了&lt;/div&gt;&lt;div&gt;self.CurChunkGroupInfoMap[groupId] = group在包组map中填上这个包组的信息&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1960" y="280" width="450" height="100" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.001;entryY=0.519;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EBJCk_LxA7f1i_R0lV7n-10" target="EBJCk_LxA7f1i_R0lV7n-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.002;entryY=0.639;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-1" target="EBJCk_LxA7f1i_R0lV7n-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1570" y="241" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-15" value="&lt;font color=&quot;#ff0000&quot;&gt;这里为什么不在第一次获取包组信息的时候&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;把包组中pak的信息也填上&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;没必要获取两次包组信息吧？&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2160" y="133" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-16" value="GetIsInAppDownloadInfo(group)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1120.5" y="255" width="189" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-1" value="如果在底包中，&lt;div&gt;就直接返回包组已下载完成&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1050" y="210" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="zegwxUL89KQ7tsU-fR5h-2" target="rArM3rnajTcCenrp1fIl-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1380" y="410" />
              <mxPoint x="1380" y="-47" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-2" value="GetPufferNotReadyDownLoadInfo(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1085" y="380" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.328;entryY=1.045;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" parent="1" source="zegwxUL89KQ7tsU-fR5h-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1380.5" y="392.3526315789475" as="sourcePoint" />
            <mxPoint x="1868.88" y="84.99999999999982" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-6" value="如果puffer没有准备好/初始化失败&lt;div&gt;就直接吧需要下载的大小设为100MB来&lt;/div&gt;&lt;div&gt;诱导玩家再次点击下载以再次出发初始化&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="390" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-7" value="DownloadInfo.DownloadSize = (config.downloadSize or 0) * 1024 * 1024" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1430" y="440" width="410" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.005;entryY=0.459;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="zegwxUL89KQ7tsU-fR5h-2" target="zegwxUL89KQ7tsU-fR5h-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-10" value="如果puffer没有准备好/初始化失败&lt;div&gt;就直接吧需要下载的大小设为100MB来&lt;/div&gt;&lt;div&gt;诱导玩家再次点击下载以再次出发初始化&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="990" y="320" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="zegwxUL89KQ7tsU-fR5h-11" target="zegwxUL89KQ7tsU-fR5h-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-11" value="如果group and group.DownloadInfo&lt;div&gt;并且包组不在底包中&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1085" y="500" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.003;entryY=0.539;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="zegwxUL89KQ7tsU-fR5h-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2LbkLb7nEPTzZpbKEL1S-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="zegwxUL89KQ7tsU-fR5h-13" target="ZoTpO-E-y77L-gHKQsqO-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-13" value="如果group.DownloadInfo.HasInited为false，&lt;div&gt;即包组信息还没有初始化过&lt;/div&gt;&lt;div&gt;就强制把reCheck设为true&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="990" y="570" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ZoTpO-E-y77L-gHKQsqO-1" target="W1clx_jqjv_z5-9Xy4Aw-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZoTpO-E-y77L-gHKQsqO-1" value="如果reCheck&amp;nbsp;&lt;div&gt;and (group.DownloadInfo.DownloadState &amp;lt;= MoeChunkCommonDefine.DownloadState.None 目前还没有下载，并且需要下载&lt;/div&gt;&lt;div&gt;and not group.NeedUpdateChunkGroup接下来需要获取包组大小，需要在pak信息更新后进行&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1280" y="570" width="690" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="5cEbv5X1kibHwalH5eq4-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2165" y="480" />
              <mxPoint x="1220" y="480" />
              <mxPoint x="1220" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="W1clx_jqjv_z5-9Xy4Aw-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="DKOrTGj42sUnfdID28H5-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="DKOrTGj42sUnfdID28H5-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-1" value="GetAndUpdateGroupState(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2030" y="570" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-3" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2420" y="440" as="sourcePoint" />
            <mxPoint x="2910" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-6" value="先获取包组信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2150" y="518" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-7" value="如果group.IsInApp在底包中，就直接返回下载完成" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2380" y="518" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.491;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="W1clx_jqjv_z5-9Xy4Aw-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-9" target="W1clx_jqjv_z5-9Xy4Aw-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-9" value="GetChunkGroupConfigState&lt;div&gt;(basePath, groupId)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2940" y="530" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-10" target="mCDaXQ1oLwFUrLK5YZRS-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-10" value="GetCacheJson(basePath)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3340" y="480" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-1" value="&lt;div&gt;local path = string.format(&quot;%s/%s&quot;, basePath, MoeChunkCommonDefine.ChunkDownLoadCacheFileName)&lt;/div&gt;&lt;div&gt;local FileContent = UE4.UELoadRawFile(path)&lt;/div&gt;&lt;div&gt;local jsonTable = UE4.rapidjson.decode(FileContent)&lt;/div&gt;&lt;div&gt;MoeAssetsUtils.__cachedJson = jsonTable or {}&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3560" y="475" width="600" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-3" value="获取所有文件的存储的cache信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3315" y="445" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-4" value="如果cacheJson[key].finished&lt;div&gt;返回MoeChunkCommonDefine.GroupState.Update，需要更新包组状态&lt;/div&gt;&lt;div&gt;否则返回MoeChunkCommonDefine.GroupState.Continue，继续下载包组&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3350" y="680" width="410" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-5" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;如果cacheJson[key].download为false，&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;或者cacheJson[key]不存在，就直接返回包组需要下载&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;MoeChunkCommonDefine.GroupState.Download&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3315" y="580" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.004;entryY=0.504;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-9" target="mCDaXQ1oLwFUrLK5YZRS-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.667;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-9" target="mCDaXQ1oLwFUrLK5YZRS-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3230" y="560" />
              <mxPoint x="3230" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-5" value="根据存储的包组cache信息来获取当前包组的下载状态" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2630" y="560" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-6" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2910" y="1840" as="sourcePoint" />
            <mxPoint x="2910" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-7" value="如果包组信息读取失败、包组中pak的信息为nil，puffer未初始化成功或者NeedUpdateChunkGroup，&lt;div&gt;需要刷新一遍包组中有哪些pak，返回MoeChunkCommonDefine.GroupState.Invalid&lt;/div&gt;&lt;div&gt;即不能对包组进行下载&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2353" y="630" width="560" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-9" target="DKOrTGj42sUnfdID28H5-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-9" value="GetPakLocalState" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2370" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-12" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="4160" y="2590" as="sourcePoint" />
            <mxPoint x="4140" y="-250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-13" value="MoePakLoader" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4428.5" y="-310" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-14" value="IsPakDownloadFinished" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4429" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-16" value="&lt;div&gt;先获取pakloader，如果为nil，就返回nil&lt;/div&gt;&lt;div&gt;检测从pakloader信息中检测包组是否下载成功&lt;/div&gt;如果当前pak的LoaderState是准备mount、mount成功或失败&lt;div&gt;就说明以及下载完成，返回MoeChunkCommonDefine.GroupState.Finish&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2550" y="770" width="410" height="70" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-17" value="否则如果当前pak已存在就返回MoeChunkCommonDefine.GroupState.Update" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2530" y="870" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.564;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="DKOrTGj42sUnfdID28H5-9" target="DKOrTGj42sUnfdID28H5-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-19" value="否则就说明包组还未开始下载，&lt;div&gt;返回MoeChunkCommonDefine.GroupState.None&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2540" y="920" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="DKOrTGj42sUnfdID28H5-9" target="DKOrTGj42sUnfdID28H5-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-21" value="遍历每一个pak，如果pak全部下载成功&lt;div&gt;就返回MoeChunkCommonDefine.GroupState.Finish下载完成&lt;/div&gt;&lt;div&gt;如果有个别pak下载成功，&lt;/div&gt;&lt;div&gt;就返回MoeChunkCommonDefine.GroupState.Continue继续下载&lt;/div&gt;&lt;div&gt;如果没有一个pak下载完，&lt;/div&gt;&lt;div&gt;即返回当前包组的下载状态&lt;/div&gt;&lt;div&gt;即根据cache信息获取的下载状态&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2140" y="810" width="360" height="130" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.629;entryY=1.026;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="DKOrTGj42sUnfdID28H5-21" target="W1clx_jqjv_z5-9Xy4Aw-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2301" y="980" />
              <mxPoint x="3072" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-23" value="&lt;font color=&quot;#ff0000&quot;&gt;这个函数会返回包组的最新下载状态，&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;但是此处并没有使用下载状态的信息，&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;所以这个为什么还要有这段代码？&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2050" y="640" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-25" value="&lt;font color=&quot;#ff0000&quot;&gt;此处需要直接读取本地文件大小，&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;消耗较大&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3308" y="390" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-26" value="根据包组当前的下载状态设置剩余需要下载的大小和接下来的状态" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1565" y="670" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.53;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ZoTpO-E-y77L-gHKQsqO-1" target="DKOrTGj42sUnfdID28H5-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-29" target="DKOrTGj42sUnfdID28H5-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-29" value="如果downloadInfo.DownloadState &lt;= MoeChunkCommonDefine.DownloadState.None" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="540" y="1511" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-31" target="9BERAMWRa7RxrbQvjHLC-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UsIC1Cq8I4O-6JFoNgjj-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-31" target="u0-7liOXMVpNzV4LG57C-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6FkeXkSnoK2cfu1XVPdi-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-31" target="6FkeXkSnoK2cfu1XVPdi-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-31" target="unCPsn3MEVdWylHXeG-M-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-31" target="unCPsn3MEVdWylHXeG-M-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-31" target="unCPsn3MEVdWylHXeG-M-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-31" value="StartDownloadGroup(groupId, MoeChunkCommonDefine.TaskLevel.Normal,false)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1075" y="1501" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DKOrTGj42sUnfdID28H5-33" target="DKOrTGj42sUnfdID28H5-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-33" value="如果downloadInfo.DownloadState == MoeChunkCommonDefine.DownloadState.Ing&lt;div&gt;如果正在下载，就只修改下载优先级至Normal&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="530" y="1604" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.567;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="DKOrTGj42sUnfdID28H5-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-35" target="9BERAMWRa7RxrbQvjHLC-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-35" value="ChangeDownloadTaskLevel(groupId, MoeChunkCommonDefine.TaskLevel.Normal)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1085" y="1594" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DKOrTGj42sUnfdID28H5-37" target="WK4fV78gmZCNVYaioPYy-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-37" value="如果downloadInfo.DownloadState == MoeChunkCommonDefine.DownloadState.Pause" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="540" y="1709" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.002;entryY=0.638;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="DKOrTGj42sUnfdID28H5-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WK4fV78gmZCNVYaioPYy-2" value="ResumeDownloadGroup(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1104.5" y="1694" width="205" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="9BERAMWRa7RxrbQvjHLC-2" target="9BERAMWRa7RxrbQvjHLC-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-2" value="CheckGroupIsInDownloading(inGroupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1535" y="1406" width="225" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-4" value="如果包组正在下载就只修改包组下载优先级至Normal" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1425" y="1376" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="9BERAMWRa7RxrbQvjHLC-6" target="E2rJLH84rPxVVhqr3JPG-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="9BERAMWRa7RxrbQvjHLC-6" target="E2rJLH84rPxVVhqr3JPG-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1915" y="1500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-6" value="ChangeDownloadTaskLevel(groupId, taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1810" y="1406" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-8" value="修改下载任务优先级" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1805" y="1369" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="E2rJLH84rPxVVhqr3JPG-3" target="E2rJLH84rPxVVhqr3JPG-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-3" value="当前任务已有优先级，根据当前优先级来设置修改后的优先级" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2110" y="1346" width="350" height="30" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-4" value="GetRecaculatePriority(oldPriority, taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3115" y="1331" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.416;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="9BERAMWRa7RxrbQvjHLC-6" target="E2rJLH84rPxVVhqr3JPG-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="E2rJLH84rPxVVhqr3JPG-7" target="E2rJLH84rPxVVhqr3JPG-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-7" value="当前任务没有优先级，直接设置，&lt;div&gt;同时保证没有一个任务__TaskDownloadDefaultOrder就+1，来保证每个任务的优先级都不同&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2130" y="1430" width="510" height="40" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-9" value="GetDownloadPriority(taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3115" y="1420" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="E2rJLH84rPxVVhqr3JPG-11" target="E2rJLH84rPxVVhqr3JPG-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-11" value="UdpateDownloadFileMutexTag(groupId, priority, taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4378" y="1470" width="221" height="60" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-14" value="GetTaskPoolPriority(inTaskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4740" y="1430" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="E2rJLH84rPxVVhqr3JPG-16" value="根据当前下载的优先级获取具体的优先级数字，手动下载Normal为4" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="4620" y="1398" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsIC1Cq8I4O-6JFoNgjj-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="u0-7liOXMVpNzV4LG57C-1" target="EgfYHaSXt62NNEBrkIG0-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1940" y="1574" />
              <mxPoint x="1940" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="u0-7liOXMVpNzV4LG57C-1" value="CheckPufferNotReadyNeedReturn(inGroupId, inTaskLevel, isAuto)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1525" y="1544" width="245" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6FkeXkSnoK2cfu1XVPdi-1" value="&lt;div&gt;table.insert(self.PufferNotReadyDownloadGroupIdList, {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; groupId = inGroupId, taskLevel = inTaskLevel&lt;/div&gt;&lt;div&gt;})&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1880" y="1610" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6FkeXkSnoK2cfu1XVPdi-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.003;entryY=0.639;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="u0-7liOXMVpNzV4LG57C-1" target="6FkeXkSnoK2cfu1XVPdi-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6FkeXkSnoK2cfu1XVPdi-3" value="如果该包组的puffer还未初始化成功，&lt;div&gt;就将该包组的下载任务存入&lt;span style=&quot;background-color: initial;&quot;&gt;PufferNotReadyDownloadGroupIdList&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;因puffer未初始化成功而未开始下载的包组任务&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1910" y="1561" width="370" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6FkeXkSnoK2cfu1XVPdi-4" value="CheckDownloadSceneNeedReturn(inGroupId, inTaskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1516.25" y="1670" width="262.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6FkeXkSnoK2cfu1XVPdi-6" value="在该场景下，是否可以下载该包组" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1516.25" y="1640" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="6FkeXkSnoK2cfu1XVPdi-8" value="puffer是否初始化成功" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1530" y="1508" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-1" value="CheckGroupIsDownloadFinish(inGroupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1513.75" y="1780" width="265" height="60" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-3" value="&lt;font color=&quot;#ff0000&quot;&gt;检查一个pak是否下载完成&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2960" y="480" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-4" value="是否下载完成" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1535" y="1750" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-6" value="&lt;font color=&quot;#ff0000&quot;&gt;下载包组的接口&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1145" y="1458" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-7" value="ChangeGroupDownloadState(inGroupId, MoeChunkCommonDefine.DownloadState.Ing)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1516.25" y="1890" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-9" value="通过了以上检查，可以开始下载包组，把下载状态改为正在下载" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1461.25" y="1860" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="unCPsn3MEVdWylHXeG-M-10" target="unCPsn3MEVdWylHXeG-M-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="unCPsn3MEVdWylHXeG-M-10" target="eoeWwwieC03xzRWn3fbb-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1990" y="2020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="unCPsn3MEVdWylHXeG-M-10" target="eoeWwwieC03xzRWn3fbb-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="unCPsn3MEVdWylHXeG-M-10" target="eoeWwwieC03xzRWn3fbb-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-10" value="StartPakLoaderDownload(pakLoader, inGroupId, inTaskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1533.75" y="2000" width="215" height="60" as="geometry" />
        </mxCell>
        <mxCell id="unCPsn3MEVdWylHXeG-M-12" value="IsNeedCheckFreeSpace" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1980" y="1920" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-1" value="每个一段时间检查下剩余的磁盘空间是多大" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1910" y="1880" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-3" value="IsHavenFreeWorkSpace(inPakLoader)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1990" y="2020" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-6" value="需要检查剩余空间大小" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1920" y="1990" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="eoeWwwieC03xzRWn3fbb-8" target="xqj5PGwOFCIGLK98It7M-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3225" y="2270" />
              <mxPoint x="3225" y="2210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2100" y="2308" as="sourcePoint" />
            <mxPoint x="3207.5" y="1468" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eoeWwwieC03xzRWn3fbb-8" target="xqj5PGwOFCIGLK98It7M-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="eoeWwwieC03xzRWn3fbb-8" target="2cNklSJPknrklIJYB0yS-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-8" value="PakLoaderDownloadReal(inPakLoader, inGroupId, inTaskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1845" y="2250" width="255" height="140" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-10" value="PauseDownloadGroup(inGroupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1910" y="2130" width="212" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-12" value="剩余空间不足，暂停下载" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1840" y="2088" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eoeWwwieC03xzRWn3fbb-13" value="可以下载" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1865" y="2210" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetPakLoaderState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;()&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4350" y="2180" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-4" value="先获取pak当前的下载阶段" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2100" y="2238" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-6" value="获取当前下载任务的优先级" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2095" y="2278" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-7" value="每一类任务的优先级相差&lt;span style=&quot;color: rgb(237, 148, 192); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;100000000&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(237, 148, 192); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;以此来严格保证优先级高的任务级别&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(237, 148, 192); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;优先级绝对的高&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3305" y="1410" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="xqj5PGwOFCIGLK98It7M-9" target="E2rJLH84rPxVVhqr3JPG-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-9" value="如果当前下载阶段为&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;EMoePakLoaderState&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Downloading&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2220" y="2320" width="420" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-13" value="就只刷新当前下载任务的优先级" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2705" y="2308" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-16" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="5250" y="3290" as="sourcePoint" />
            <mxPoint x="5240.079787234041" y="-440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-18" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;MoePufferInstance&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5670" y="-310" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-19" value="获取包组信息的流程" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="620" y="230" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xqj5PGwOFCIGLK98It7M-20" value="与下载相关的流程" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="470" y="388" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="2cNklSJPknrklIJYB0yS-2" target="E2rJLH84rPxVVhqr3JPG-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="2cNklSJPknrklIJYB0yS-2" target="2cNklSJPknrklIJYB0yS-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3484" y="2390" />
              <mxPoint x="3484" y="2400" />
              <mxPoint x="4308" y="2400" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-2" value="如果当前下载阶段为&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208); font-weight: bold; font-style: italic;&quot;&gt;EMoePakLoaderState&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;DownloadPause&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2220" y="2370" width="440" height="40" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-5" value="具体见下载优先级图表" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="4490" y="1528" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="2cNklSJPknrklIJYB0yS-8" target="2cNklSJPknrklIJYB0yS-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-8" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ResumeDownloadTask&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;inGroupId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4307.5" y="2350" width="295" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-10" value="先刷新优先级，再重新开始下载" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2700" y="2365" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="2cNklSJPknrklIJYB0yS-11" target="2cNklSJPknrklIJYB0yS-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="2cNklSJPknrklIJYB0yS-11" target="2cNklSJPknrklIJYB0yS-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="2cNklSJPknrklIJYB0yS-11" target="2cNklSJPknrklIJYB0yS-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="5635" y="2440" />
              <mxPoint x="6440" y="2440" />
              <mxPoint x="6440" y="2540" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-11" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ResumeDownloadTask&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;fileName&lt;span style=&quot;color:#bdbdbd;&quot;&gt;, &lt;/span&gt;mutexTag&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5430" y="2350" width="410" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-13" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;GetDownloadTaskByFilename&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;fileName&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="6030" y="2208" width="370" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-15" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;AppendDownloadTaskMutexTag&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;mutexTag&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="6050" y="2338" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-17" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="6610" y="2670" as="sourcePoint" />
            <mxPoint x="6619.925166294586" y="-548.888753255208" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-19" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePufferDownloadTask&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="7230" y="-330" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="2cNklSJPknrklIJYB0yS-20" target="WT-xKAYDLrvriA7aafc6-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2cNklSJPknrklIJYB0yS-20" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;WaitDownload&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="6780" y="2510" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-1" value="设置pak在该包组中的下载优先级&lt;div&gt;如果已有当前pak在该包组中的下载任务，就返回false&lt;/div&gt;&lt;div&gt;没有就创建优先级并返回true&lt;/div&gt;&lt;div&gt;具体见下载优先级&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6280" y="2273" width="310" height="70" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-2" value="获取当前文件的下载任务，&lt;div&gt;如果没有，就什么都不做&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5855" y="2203" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fjnHu3OrLBY5fQJNI2zC-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WT-xKAYDLrvriA7aafc6-3" target="fjnHu3OrLBY5fQJNI2zC-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Hg9tfmUJ83bYcJirUtru-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WT-xKAYDLrvriA7aafc6-3" target="Hg9tfmUJ83bYcJirUtru-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="7940" y="2540" />
              <mxPoint x="7940" y="1458" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ChangeDownloadTaskState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;MoePufferConst&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;E_PufferDownloadTaskState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;Wait&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="7015" y="2510" width="700" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-5" value="如果当前下载阶段为&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;EMoePakLoaderState&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Merging&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;都已经开始合并了，直接返回&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2220" y="2423" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.45;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="eoeWwwieC03xzRWn3fbb-8" target="WT-xKAYDLrvriA7aafc6-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WT-xKAYDLrvriA7aafc6-7" target="WT-xKAYDLrvriA7aafc6-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-7" value="否则就是还未开始下载，即从0开始下载" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2220" y="2530" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.333;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="eoeWwwieC03xzRWn3fbb-8" target="WT-xKAYDLrvriA7aafc6-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="WT-xKAYDLrvriA7aafc6-9" target="WT-xKAYDLrvriA7aafc6-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-9" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;StartDownLoadTask&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(priority, &lt;/span&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;inTaskLevel&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#7df0c0;&quot;&gt;nil&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;inGroupId&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4270" y="2550" width="570" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VgbagE6U-px81FMf22ax-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="WT-xKAYDLrvriA7aafc6-11" target="VgbagE6U-px81FMf22ax-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ziHc-k_8gt5d_6McP2Bz-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="WT-xKAYDLrvriA7aafc6-11" target="ziHc-k_8gt5d_6McP2Bz-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-11" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;StartDownloadTask&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;self&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;DownloadTaskParam&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5359" y="2580" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WT-xKAYDLrvriA7aafc6-13" value="&lt;font color=&quot;#cc0000&quot;&gt;从此处开始才是真正地创建下载任务&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5280" y="2550" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VgbagE6U-px81FMf22ax-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VgbagE6U-px81FMf22ax-2" target="VgbagE6U-px81FMf22ax-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VgbagE6U-px81FMf22ax-2" value="CheckIsReady" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5910" y="2490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VgbagE6U-px81FMf22ax-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.413;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="WT-xKAYDLrvriA7aafc6-11" target="VgbagE6U-px81FMf22ax-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VgbagE6U-px81FMf22ax-5" value="CheckState&lt;div&gt;(MoePufferConst.E_PufferConnectState.Ready)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="6095" y="2490" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VgbagE6U-px81FMf22ax-7" value="puffer还未初始化完成，直接return false" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5875" y="2460" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VgbagE6U-px81FMf22ax-8" value="如果self.pufferUsualState == MoePufferConst.E_PufferUsualState.Pause，puffer暂停了，也返回false" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5923" y="2600" width="560" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ziHc-k_8gt5d_6McP2Bz-2" value="&lt;div style=&quot;background-color: rgb(38, 38, 38); line-height: 100%;&quot;&gt;&lt;pre style=&quot;color: rgb(208, 208, 208);&quot;&gt;&lt;font style=&quot;font-size: 13px; line-height: 100%;&quot; face=&quot;Helvetica&quot;&gt;如果pakFile &lt;span style=&quot;color: rgb(108, 149, 235);&quot;&gt;and &lt;/span&gt;pakFiles &lt;span style=&quot;color: rgb(108, 149, 235);&quot;&gt;or &lt;/span&gt;&lt;span style=&quot;color: rgb(189, 189, 189);&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: rgb(108, 149, 235);&quot;&gt;not &lt;/span&gt;pakFile &lt;span style=&quot;color: rgb(108, 149, 235);&quot;&gt;and not &lt;/span&gt;pakFiles&lt;span style=&quot;color: rgb(189, 189, 189);&quot;&gt;)直接返回&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre&gt;&lt;font style=&quot;font-size: 13px; line-height: 100%;&quot; face=&quot;Helvetica&quot; color=&quot;#bdbdbd&quot;&gt;该接口既可以接受多个pak也可以接受单个pak&lt;/font&gt;&lt;/pre&gt;&lt;pre&gt;&lt;font style=&quot;font-size: 13px; line-height: 100%;&quot; face=&quot;Helvetica&quot; color=&quot;#bdbdbd&quot;&gt;在此处做处理，如果既传了单个pak，又传了多个pak，&lt;/font&gt;&lt;/pre&gt;&lt;pre&gt;&lt;font face=&quot;Helvetica&quot; style=&quot;font-size: 13px; line-height: 100%;&quot; color=&quot;#bdbdbd&quot;&gt;就说明传递的参数有问题&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5923" y="2630" width="410" height="130" as="geometry" />
        </mxCell>
        <mxCell id="ziHc-k_8gt5d_6McP2Bz-4" value="如果&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(108, 149, 235);&quot;&gt;not &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;pakFiles，就把pakFiles设为{pakFile}，来做兼容处理&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5923" y="2780" width="550" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ziHc-k_8gt5d_6McP2Bz-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.001;entryY=0.553;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="WT-xKAYDLrvriA7aafc6-11" target="ziHc-k_8gt5d_6McP2Bz-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ZYlrwazz-xblasz_2jx3-1" target="Yf3Ly5OScd5XHx736i1E-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZYlrwazz-xblasz_2jx3-1" target="Yf3Ly5OScd5XHx736i1E-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZYlrwazz-xblasz_2jx3-1" value="遍历pakFiles中的每一个pak作为tempPakFile" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5923" y="2858" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZYlrwazz-xblasz_2jx3-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.002;entryY=0.567;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="WT-xKAYDLrvriA7aafc6-11" target="ZYlrwazz-xblasz_2jx3-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-1" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="6610" y="2670" as="sourcePoint" />
            <mxPoint x="8890" y="2660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#6c95eb;&quot;&gt;local &lt;/span&gt;localPakVO = self&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;localPakVersions&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;PakVO&lt;span style=&quot;color:#bdbdbd;&quot;&gt;[&lt;/span&gt;tempPakFile&lt;span style=&quot;color:#bdbdbd;&quot;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6220" y="2810" width="590" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePufferCommonUtils&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="8440" y="3720" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-6" target="Yf3Ly5OScd5XHx736i1E-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="8403" y="2910" />
              <mxPoint x="8390" y="2910" />
              <mxPoint x="8390" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-6" target="Yf3Ly5OScd5XHx736i1E-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="8403" y="2910" />
              <mxPoint x="8390" y="2910" />
              <mxPoint x="8390" y="1135" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-6" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;CheckFileIsReady&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;pufferIns&lt;span style=&quot;font-size: 14.3pt; white-space: normal; color: rgb(189, 189, 189);&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space: normal;&quot;&gt;filePath&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space: normal; color: rgb(189, 189, 189);&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space: normal;&quot;&gt;isSimple&lt;/span&gt;)&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="8190" y="2917" width="425" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-8" value="传true使用缓存，传false不使用缓存" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="8145" y="2880" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-9" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetFileDownloadPath&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;fileName&lt;span style=&quot;color:#bdbdbd;&quot;&gt;, &lt;/span&gt;formatType&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5330" y="960" width="420" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-11" value="获取puffer下载的本地文件缓存地址" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5325" y="928" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-13" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetFileMd5Puffer&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;fileName&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5395" y="1120" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-14" value="获取文件在puffer上的MD5" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5360" y="1088" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-16" value="获取从puffer上下载下来的文件的&lt;div&gt;本地缓存地址和MD5值&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="8365" y="2730" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-17" value="如果从puffer中获取的文件MD5&lt;div&gt;为nil，puffer肯定没有准备好下载该文件&lt;/div&gt;&lt;div&gt;直接返回false&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="8385" y="2790" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-18" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetMD5CacheInfo&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;filePath&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="8840" y="2967" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.008;entryY=0.616;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-6" target="Yf3Ly5OScd5XHx736i1E-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-20" value="获取缓存的本地文件的MD5值" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="8910" y="2935" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-21" value="如果此处不使用缓存，可以直接去根据文件获取&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;localMD5 = UE4&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;USPLuaUtility&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;GetMD5&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;localPath&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;)&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="8720" y="3067" width="710" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.609;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-6" target="Yf3Ly5OScd5XHx736i1E-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-23" value="只有当本地缓存文件的MD5与puffer上的MD5一致&lt;div&gt;&lt;font color=&quot;#cc0000&quot;&gt;如果使用缓存值，则还需要再判断本地文件是否存在&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#cc0000&quot;&gt;防止本地文件已被删掉&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="8720" y="3137" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.554;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-6" target="Yf3Ly5OScd5XHx736i1E-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Yf3Ly5OScd5XHx736i1E-25" target="Yf3Ly5OScd5XHx736i1E-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-25" value="如果上一步CheckFileIsReady为true" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6263" y="2923" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.619;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ZYlrwazz-xblasz_2jx3-1" target="Yf3Ly5OScd5XHx736i1E-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Yf3Ly5OScd5XHx736i1E-27" value="如果&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(108, 149, 235);&quot;&gt;not &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;localPakVO即本地没有该pak的版本信息&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6560" y="2950" width="420" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-2" target="nVn8dxTmXNgmjbmyD_SR-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-2" target="nVn8dxTmXNgmjbmyD_SR-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-2" target="nVn8dxTmXNgmjbmyD_SR-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-2" value="创建&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208); font-weight: bold; font-style: italic;&quot;&gt;MoePufferConst&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Struct_PakVO类型变量pakVO，&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;并且对其进行赋值&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot; color=&quot;#d0d0d0&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38);&quot;&gt;最后将其添加进&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;remotePakVersions&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;PakVO中&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7050" y="2960" width="450" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.004;entryY=0.517;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-27" target="nVn8dxTmXNgmjbmyD_SR-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-4" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetFileMd5Puffer&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;tempPakFile&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="7650" y="3000" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-6" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetFileSizePuffer&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;tempPakFile&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="7650" y="3120" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-8" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetFileDownloadSize&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;tempPakFile&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="7650" y="3236" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-10" value="获取已下载的大小" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7610" y="3204" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-11" value="获取puffer上&lt;span style=&quot;background-color: initial;&quot;&gt;文件的MD5&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7625" y="2968" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-12" value="获取文件总大小" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7615" y="3088" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-13" value="否则直接将&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;localPakVO添加入&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;remotePakVersions&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;PakVO中&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6560" y="3048" width="520" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.563;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-25" target="nVn8dxTmXNgmjbmyD_SR-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-15" value="设置&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(193, 145, 255);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;remotePakVersions&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;PakVO&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;tempPakFile&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;].&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;downloadSize = &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(237, 148, 192);&quot;&gt;0&lt;/span&gt;&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#c191ff;&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;localPakVersions&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;PakVO&lt;span style=&quot;color:#bdbdbd;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;tempPakFile&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;] &lt;/span&gt;= &lt;span style=&quot;color:#7df0c0;&quot;&gt;nil&lt;br&gt;&lt;/span&gt;localPakVO = &lt;span style=&quot;color:#7df0c0;&quot;&gt;nil&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6560" y="3107" width="600" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.358;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Yf3Ly5OScd5XHx736i1E-25" target="nVn8dxTmXNgmjbmyD_SR-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-17" target="nVn8dxTmXNgmjbmyD_SR-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-17" value="如果&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(108, 149, 235);&quot;&gt;not &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;localPakVO&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;即&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;localPakVO真为nil&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;或者CheckFileIsReady为false&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot; color=&quot;#d0d0d0&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38);&quot;&gt;获取diff文件，如果diff文件已经ready了&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot; color=&quot;#d0d0d0&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38);&quot;&gt;就将其存入&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(189, 189, 189); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;finalPakFiles&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(189, 189, 189); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;如果获取的diff文件为nil，就说明文件自身&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(189, 189, 189); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;已经ready了，将源文件存入&lt;/span&gt;&lt;span style=&quot;color: rgb(189, 189, 189); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;finalPakFiles&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6230" y="3204" width="400" height="170" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.625;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ZYlrwazz-xblasz_2jx3-1" target="nVn8dxTmXNgmjbmyD_SR-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-19" target="nVn8dxTmXNgmjbmyD_SR-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-19" target="Yf3Ly5OScd5XHx736i1E-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="7140" y="3420" />
              <mxPoint x="7140" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-19" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;GetFileDiffPath&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;tempPakFile&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="6717" y="3389" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-21" value="如果&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;pufferInitInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;commonConf&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;pufferInitInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;commonConf为false&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;即不开启diff，直接返回&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7067" y="3329" width="690" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nVn8dxTmXNgmjbmyD_SR-24" value="获取puffer的本地文件&lt;div&gt;缓存路径&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;localPath&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7027" y="3399" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nrmA46b-puM_eLsuRpyS-1" value="&lt;font color=&quot;#cc0000&quot;&gt;获取/创建diff文件路径（包括diff版本）&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#cc0000&quot;&gt;方式是根据本地的md5值和puffer服务器上的md5值版本做对比&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#cc0000&quot;&gt;找到需要的对应的diff文件版本来下载&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6647" y="3329" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KHSn6jYGj67xD_3zu6---1" value="如果本地diff文件存在就直接返回diff文件路径&lt;div&gt;如果不存在，就先创建再返回&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7047" y="3466" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KHSn6jYGj67xD_3zu6---2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.003;entryY=0.627;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-19" target="KHSn6jYGj67xD_3zu6---1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j7-p0Rd59v2tgN19EXxY-1" value="创建方法为遍历puffer上的pak列表信息&lt;div&gt;即&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;pufferDiffList&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot; color=&quot;#d0d0d0&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38);&quot;&gt;并将MD5信息与本地pak的MD5信息做对比&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot; color=&quot;#d0d0d0&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38);&quot;&gt;找到对应的diff版本，并创建路径&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;hdiffFile&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7047" y="3519" width="400" height="100" as="geometry" />
        </mxCell>
        <mxCell id="j7-p0Rd59v2tgN19EXxY-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-19" target="j7-p0Rd59v2tgN19EXxY-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k_lc5SkHiniWoDWZ6PRq-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="j7-p0Rd59v2tgN19EXxY-3" target="Yf3Ly5OScd5XHx736i1E-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j7-p0Rd59v2tgN19EXxY-3" value="&lt;font style=&quot;font-size: 13px; line-height: 40%;&quot; face=&quot;Helvetica&quot;&gt;创建完diff文件路径后，将对应的信息存入&lt;/font&gt;&lt;div style=&quot;line-height: 40%;&quot;&gt;&lt;div&gt;&lt;pre&gt;&lt;font style=&quot;font-size: 13px; line-height: 40%;&quot; face=&quot;Helvetica&quot;&gt;self.__blackboardData.diffFileCacheInfo[fileName] = hdiffFile&lt;/font&gt;&lt;/pre&gt;&lt;pre&gt;&lt;font style=&quot;font-size: 13px; line-height: 40%;&quot; face=&quot;Helvetica&quot;&gt;和self&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;__diffPakFileMap&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;hdiffFile&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;] &lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;= &lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;fileName = fileName&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;isReady = isDiffReady&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;isMerge = &lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;false&lt;/span&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;}中&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7047" y="3629" width="600" height="70" as="geometry" />
        </mxCell>
        <mxCell id="j7-p0Rd59v2tgN19EXxY-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.596;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="nVn8dxTmXNgmjbmyD_SR-19" target="j7-p0Rd59v2tgN19EXxY-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k_lc5SkHiniWoDWZ6PRq-2" value="获取diff文件是否已ready" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7602" y="3629" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k_lc5SkHiniWoDWZ6PRq-3" value="&lt;font color=&quot;#cc0000&quot;&gt;检查文件是否准备好，即是否与puffer完全一致&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#cc0000&quot;&gt;机制是获取该文件的本地地址MD5与puffer上的MD5进行对比&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#cc0000&quot;&gt;注意：如果使用缓存值，但是之前又没有对文件进行缓存处理&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#cc0000&quot;&gt;此时会认为是没有ready&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="8060" y="2978" width="350" height="70" as="geometry" />
        </mxCell>
        <mxCell id="0ZDOtPlnC1deJy1EQpII-1" value="如果localPakVO不为nil或者上面的diff文件ready了&lt;div&gt;就说明是初次更新完成，需要广播下载状态改变的方法&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MoePufferConst&lt;span style=&quot;color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;E_PufferEventKey&lt;span style=&quot;color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;TaskDownloadStateChange&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6230" y="3439" width="390" height="80" as="geometry" />
        </mxCell>
        <mxCell id="0ZDOtPlnC1deJy1EQpII-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.567;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ZYlrwazz-xblasz_2jx3-1" target="0ZDOtPlnC1deJy1EQpII-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ELnWHv3zKXbGFaXxVJoZ-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="ELnWHv3zKXbGFaXxVJoZ-1" target="2cNklSJPknrklIJYB0yS-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ELnWHv3zKXbGFaXxVJoZ-1" value="如果该下载任务存在，就修改优先级&lt;div&gt;如果不存在就创建下载任务&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6230" y="3553" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ELnWHv3zKXbGFaXxVJoZ-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.001;entryY=0.426;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ZYlrwazz-xblasz_2jx3-1" target="ELnWHv3zKXbGFaXxVJoZ-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ELnWHv3zKXbGFaXxVJoZ-5" value="下载任务最终进入等待下载队列" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="6450" y="3538" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fjnHu3OrLBY5fQJNI2zC-1" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="8060" y="4150" as="sourcePoint" />
            <mxPoint x="8060" y="2670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fjnHu3OrLBY5fQJNI2zC-2" value="广播下&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;MoePufferConst&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;E_PufferEventKey&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;TaskDownloadStateChange&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="7805" y="2320" width="580" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fjnHu3OrLBY5fQJNI2zC-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.001;entryY=0.452;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="WT-xKAYDLrvriA7aafc6-3" target="fjnHu3OrLBY5fQJNI2zC-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fjnHu3OrLBY5fQJNI2zC-4" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;OnUpdateDownloadTaskLogic&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="7850" y="2395" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Hg9tfmUJ83bYcJirUtru-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MarkUpdateDownloadTaskListFlag&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5325" y="1428" width="301" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FwhhJt6rd7VMmqd7IpNr-1" value="&lt;font color=&quot;#cc0000&quot;&gt;需要特别注意diff的方式&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="5295" y="2648" width="150" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="77BsFedVGIXCOyJEhH9Z" name="下载数据的获取">
    <mxGraphModel dx="2026" dy="1146" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Iap6PsLM9TZzxNTgIO9O-1" value="MoeChunkGroupManager" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="110" y="30" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Iap6PsLM9TZzxNTgIO9O-3" value="InitChunkGroupConfigMap" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="117.5" y="170" width="155" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Iap6PsLM9TZzxNTgIO9O-7" value="从F-分包表中读取数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="117.5" y="240" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="OmCMyaqTxQ6llqbQJzmK-1" target="S3xliCYBSsEvqeYIsqXU-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="OmCMyaqTxQ6llqbQJzmK-1" target="S3xliCYBSsEvqeYIsqXU-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OmCMyaqTxQ6llqbQJzmK-1" value="GetPakDownloadedSize" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="180" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OmCMyaqTxQ6llqbQJzmK-2" value="MoePakManager" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-1" value="GetPakLoader" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="650" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-3" value="MoePakLoader" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="980" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="S3xliCYBSsEvqeYIsqXU-4" target="S3xliCYBSsEvqeYIsqXU-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="S3xliCYBSsEvqeYIsqXU-4" target="S3xliCYBSsEvqeYIsqXU-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="S3xliCYBSsEvqeYIsqXU-4" target="S3xliCYBSsEvqeYIsqXU-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1080" y="290" />
              <mxPoint x="1080" y="430" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-4" value="GetPakFileDownloadedSize" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="860" y="260" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-6" value="数据由每个pak的pakloader进行存储" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="420" y="250" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-7" value="MoePufferInstance" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1490" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-8" value="IsPakDownloadFinished" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1110" y="160" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-10" value="判断是否下载完成" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="970" y="220" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-11" value="GetPakFileTotalSize" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1140" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-13" value="下载完成直接返回文件总大小" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1060" y="248" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="S3xliCYBSsEvqeYIsqXU-14" target="NA7hQgmorC5xM0s7l6Vz-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="S3xliCYBSsEvqeYIsqXU-14" target="NA7hQgmorC5xM0s7l6Vz-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-14" value="GetFileDownloadSize" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1440" y="398" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-16" value="没有下载完成就向puffer查找" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1130" y="398" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-1" value="GetFileDiffPath" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1654" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-3" value="fPuffer:GetFileDownloadedSize" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1670" y="450" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-5" value="获取文件的下载路径" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1525" y="368" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-6" value="调用C++端获取已下载大小" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1670" y="413" width="170" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="mi3upt8WAsaBwaiXo09l" name="下载优先级">
    <mxGraphModel dx="2026" dy="1146" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="-iX8otMSWJ3a1N52mhtF-1" value="MoeChunkGroupDownloadSchedule" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="30" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="-iX8otMSWJ3a1N52mhtF-4" target="-iX8otMSWJ3a1N52mhtF-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-4" target="-iX8otMSWJ3a1N52mhtF-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="130" y="759" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-4" value="ChangeDownloadTaskLevel(groupId, taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="25" y="665" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-5" value="修改下载任务优先级" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="20" y="628" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-7" target="-iX8otMSWJ3a1N52mhtF-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-7" value="当前任务已有优先级，根据当前优先级来设置修改后的优先级" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="325" y="605" width="350" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-8" value="GetRecaculatePriority(oldPriority, taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="970" y="590" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.416;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-4" target="-iX8otMSWJ3a1N52mhtF-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-11" target="-iX8otMSWJ3a1N52mhtF-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-11" value="当前任务没有优先级，直接设置，&lt;div&gt;同时保证没有一个任务__TaskDownloadDefaultOrder就+1，来保证每个任务的优先级都不同&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="345" y="689" width="510" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-12" value="GetDownloadPriority(taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="970" y="679" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-14" target="-iX8otMSWJ3a1N52mhtF-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-14" target="-iX8otMSWJ3a1N52mhtF-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1999" y="745" />
              <mxPoint x="1999" y="825" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-14" target="AOcRuXjoEzk8xFQki8xo-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-14" value="UdpateDownloadFileMutexTag(groupId, priority, taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1470" y="715" width="221" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-15" value="GetTaskPoolPriority(inTaskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1832" y="675" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-16" value="根据当前下载的优先级获取具体的优先级数字，手动下载Normal为4" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1712" y="643" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-18" value="MoeAssetsUtils" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="980" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-19" value="MoePakLoader" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1520.5" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-20" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320" y="1000" as="sourcePoint" />
            <mxPoint x="1320" y="20" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-21" value="MoePufferInstance" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2400" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-22" target="-iX8otMSWJ3a1N52mhtF-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-iX8otMSWJ3a1N52mhtF-22" target="-iX8otMSWJ3a1N52mhtF-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-22" value="UdpateDownloadFileMutexTag(self.PakName, mutexTag, priority, gcPriority)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2307" y="795" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-24" value="GetDownloadTaskByFilename(fileName)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2727" y="737" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-26" value="MoePufferDownloadTask" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3280" y="30" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="-iX8otMSWJ3a1N52mhtF-27" target="AOcRuXjoEzk8xFQki8xo-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-27" value="AppendDownloadTaskMutexTag(mutexTag, priority, gcPriority)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3232" y="831" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-iX8otMSWJ3a1N52mhtF-29" value="获取pak的下载任务" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2762" y="700" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-1" value="设置pak在该包组中的下载优先级&lt;div&gt;如果已有当前pak在该包组中的下载任务，就返回false&lt;/div&gt;&lt;div&gt;没有就创建优先级并返回true&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3202" y="920" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="AOcRuXjoEzk8xFQki8xo-4" target="AOcRuXjoEzk8xFQki8xo-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-4" value="AutoUpdateDownloadPriority" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3630" y="831" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-6" value="ChangeDownloadFilePriority(priority, gcPriority, isAuto)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3940" y="831" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-8" value="把pak任务优先级设置为有该pak的包组中优先级最高的" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3995" y="790" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-9" value="&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%E8%AE%BE%E7%BD%AEpak%E5%9C%A8%E8%AF%A5%E5%8C%85%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%8B%E8%BD%BD%E4%BC%98%E5%85%88%E7%BA%A7%26lt%3Bdiv%26gt%3B%E5%A6%82%E6%9E%9C%E5%B7%B2%E6%9C%89%E5%BD%93%E5%89%8Dpak%E5%9C%A8%E8%AF%A5%E5%8C%85%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%8B%E8%BD%BD%E4%BB%BB%E5%8A%A1%EF%BC%8C%E5%B0%B1%E8%BF%94%E5%9B%9Efalse%26lt%3B%2Fdiv%26gt%3B%26lt%3Bdiv%26gt%3B%E6%B2%A1%E6%9C%89%E5%B0%B1%E5%88%9B%E5%BB%BA%E4%BC%98%E5%85%88%E7%BA%A7%E5%B9%B6%E8%BF%94%E5%9B%9Etrue%26lt%3B%2Fdiv%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dcenter%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3BstrokeColor%3Dnone%3BfillColor%3Dnone%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%223200%22%20y%3D%22910%22%20width%3D%22310%22%20height%3D%2260%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%E8%AE%BE%E7%BD%AEpak%E5%9C%A8%E8%AF%A5%E5%8C%85%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%8B%E8%BD%BD%E4%BC%98%E5%85%88%E7%BA%A7%26lt%3Bdiv%26gt%3B%E5%A6%82%E6%9E%9C%E5%B7%B2%E6%9C%89%E5%BD%93%E5%89%8Dpak%E5%9C%A8%E8%AF%A5%E5%8C%85%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%8B%E8%BD%BD%E4%BB%BB%E5%8A%A1%EF%BC%8C%E5%B0%B1%E8%BF%94%E5%9B%9Efalse%26lt%3B%2Fdiv%26gt%3B%26lt%3Bdiv%26gt%3B%E6%B2%A1%E6%9C%89%E5%B0%B1%E5%88%9B%E5%BB%BA%E4%BC%98%E5%85%88%E7%BA%A7%E5%B9%B6%E8%BF%94%E5%9B%9Etrue%26lt%3B%2Fdiv%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dcenter%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3BstrokeColor%3Dnone%3BfillColor%3Dnone%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%223200%22%20y%3D%22910%22%20width%3D%22310%22%20height%3D%2260%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2040" y="758" width="20" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-10" value="设置pak在该包组中的下载优先级&lt;div&gt;如果已有当前pak在该包组中的下载任务，就返回false&lt;/div&gt;&lt;div&gt;没有就创建优先级并返回true&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2032" y="758" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-11" value="MarkUpdateDownloadTaskListFlag" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1780" y="831" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-13" value="标记__pendingUpdateDownloadTask为true" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1890" y="910" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AOcRuXjoEzk8xFQki8xo-14" value="如果下载的包组中包括已有的pak下载任务" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1740" y="797" width="250" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="kuQfpgErkQ66qwhXHDm1" name="下载状态的改变与刷新">
    <mxGraphModel dx="2960" dy="2375" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ndG3pUV2d5QZyYqvJIt1-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePufferDownloadTask&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="150" y="30" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ndG3pUV2d5QZyYqvJIt1-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ndG3pUV2d5QZyYqvJIt1-2" target="ndG3pUV2d5QZyYqvJIt1-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ndG3pUV2d5QZyYqvJIt1-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ChangeDownloadTaskState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;state&lt;span style=&quot;color:#bdbdbd;&quot;&gt;, &lt;/span&gt;extraParams&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="240" width="420" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ndG3pUV2d5QZyYqvJIt1-3" value="下载状态改变的入口" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="75" y="198" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ndG3pUV2d5QZyYqvJIt1-4" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;OnUpdateDownloadTaskLogic&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="920" y="240" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Kx659SMpFTAco2CK8m9G-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePufferInstance&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-430" y="30" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Kx659SMpFTAco2CK8m9G-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;MarkUpdateDownloadTaskListFlag&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-495" y="420" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Kx659SMpFTAco2CK8m9G-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.002;entryY=0.62;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ndG3pUV2d5QZyYqvJIt1-2" target="Kx659SMpFTAco2CK8m9G-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="510" y="270" />
              <mxPoint x="510" y="457" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Kx659SMpFTAco2CK8m9G-4" value="标记&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;__pendingUpdateDownloadTask为true&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-490" y="483" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Kx659SMpFTAco2CK8m9G-5" value="如果&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;state &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;&amp;gt;= &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;MoePufferConst&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;E_PufferDownloadTaskState&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Wait&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;就需要广播&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208); font-weight: bold; font-style: italic;&quot;&gt;MoePufferConst&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;E_PufferEventKey&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;TaskDownloadStateChange&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="560" y="130" width="650" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Kx659SMpFTAco2CK8m9G-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ndG3pUV2d5QZyYqvJIt1-2" target="Kx659SMpFTAco2CK8m9G-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j4suA_tmc1glBUEtDJN_-1" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MoePufferConst.E_PufferDownloadTaskState&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;puffer下载状态&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;None = 0,&lt;br&gt;InitFinish = 1,&lt;br&gt;Wait = 2,&lt;br&gt;Downloading = 3,&lt;br&gt;Pause = 4,&lt;br&gt;DownloadFinish = 5,&lt;br&gt;Finish = 8,&lt;br&gt;Stop = 9,&lt;br&gt;DownloadNext = 10,&lt;br&gt;Failed = 11,&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-150" y="-340" width="290" height="270" as="geometry" />
        </mxCell>
        <mxCell id="j4suA_tmc1glBUEtDJN_-3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePufferConst&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;E_PufferDownloadTaskState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;Downloading&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="30" width="520" height="70" as="geometry" />
        </mxCell>
        <mxCell id="j4suA_tmc1glBUEtDJN_-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.001;entryY=0.514;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ndG3pUV2d5QZyYqvJIt1-4" target="j4suA_tmc1glBUEtDJN_-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="I0EBQvNMjF4mdvIw4aTS-1" value="如果&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;taskId &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;&amp;gt; &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(237, 148, 192);&quot;&gt;0，即该任务是创建成功的&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1980" y="-90" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="I0EBQvNMjF4mdvIw4aTS-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.445;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="j4suA_tmc1glBUEtDJN_-3" target="I0EBQvNMjF4mdvIw4aTS-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RhiDvne_mNr1uloAo0Ks-1" value="如果not&amp;nbsp;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;isWaitDownloadFinish and not&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;fPuffer:IsFileReady&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;pakFile&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;)&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;即文件没有下载完&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2460" y="50" width="670" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RhiDvne_mNr1uloAo0Ks-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.001;entryY=0.578;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="I0EBQvNMjF4mdvIw4aTS-1" target="RhiDvne_mNr1uloAo0Ks-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RhiDvne_mNr1uloAo0Ks-3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;fPuffer:ResumeTask&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;self&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;taskId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3220" y="40" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RhiDvne_mNr1uloAo0Ks-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.597;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="RhiDvne_mNr1uloAo0Ks-1" target="RhiDvne_mNr1uloAo0Ks-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RhiDvne_mNr1uloAo0Ks-6" value="重启下载任务" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="3450" y="108" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="5NCuI9tJT-jE2HkwP4f9-1" value="IsFileReady只有本地文件下载完成时才会返回true&lt;div&gt;云端文件只有在下载前需要判断是否准备好&lt;/div&gt;&lt;div&gt;此处是重启下载任务，不需要判断云端文件是否准备好&lt;/div&gt;&lt;div&gt;所以返回false可以直接认为是本地文件没下载完&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2930" y="88" width="310" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5NCuI9tJT-jE2HkwP4f9-2" value="只有重启下载任务的时候才会走到" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1430" y="10" width="200" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="yE414nGjFgqAOi1ArMs0" name="mount流程">
    <mxGraphModel dx="3721" dy="1637" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="0" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="kNu67FEwBl-GNBNA9Ujc-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoeChunkGroupManager&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="80" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="kNu67FEwBl-GNBNA9Ujc-2" target="Pk208Q55SN1xYiAjEJWO-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kNu67FEwBl-GNBNA9Ujc-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MountGroups&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;GroupIds&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="22.5" y="300" width="225" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MountGroups&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;GroupIds&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1140" y="300" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoeChunkGroupMountSchedule&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1112.5" y="80" width="265" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-4" value="编辑器如果不传&lt;span style=&quot;color: rgb(201, 162, 109); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;ForceOpenPufferDownLoadV2命令行，&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(201, 162, 109); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;默认已mount&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1060" y="240" width="420" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Pk208Q55SN1xYiAjEJWO-5" target="Pk208Q55SN1xYiAjEJWO-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jvu30DPIwFSlpmx-JLpb-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="Pk208Q55SN1xYiAjEJWO-5" target="Jvu30DPIwFSlpmx-JLpb-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="r2qw2PplTEnhJ4jCmQF4-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="Pk208Q55SN1xYiAjEJWO-5" target="r2qw2PplTEnhJ4jCmQF4-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;CheckGroupStateAndMount&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;groupId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-32.5" y="490" width="335" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-6" value="返回true表示资源已准备好，可以直接调用" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-32.5" y="468" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.828;entryY=0.047;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="Pk208Q55SN1xYiAjEJWO-1" target="Pk208Q55SN1xYiAjEJWO-5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1240" y="380" />
              <mxPoint x="245" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-8" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;IsPufferReadyByGroupId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;inGroupId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;, &lt;/span&gt;failReset&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-792.5" y="490" width="425" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pk208Q55SN1xYiAjEJWO-10" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoeChunkGroupDownloadSchedule&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-740" y="80" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jvu30DPIwFSlpmx-JLpb-1" value="先检查puffer是否准备好了，如果没有就直接返回false" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-765" y="460" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Jvu30DPIwFSlpmx-JLpb-2" value="&lt;font color=&quot;#cc0000&quot;&gt;重点关注mount为什么需要puffer？&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-525" y="438" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r2qw2PplTEnhJ4jCmQF4-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="Jvu30DPIwFSlpmx-JLpb-3" target="r2qw2PplTEnhJ4jCmQF4-1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="53" y="420" />
              <mxPoint x="53" y="370" />
              <mxPoint x="-395" y="370" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Jvu30DPIwFSlpmx-JLpb-3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;CheckGroupState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;groupId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="408" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="r2qw2PplTEnhJ4jCmQF4-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;GetAndUpdateGroupState&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-784" y="340" width="370" height="60" as="geometry" />
        </mxCell>
        <mxCell id="r2qw2PplTEnhJ4jCmQF4-3" value="创建/刷新包组信息和状态" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-570" y="308" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r2qw2PplTEnhJ4jCmQF4-4" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;GetChunkGroupInfo&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;groupId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="475" y="525" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="r2qw2PplTEnhJ4jCmQF4-6" value="获取包组信息，调用的downloadshedule的接口" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="425" y="498" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="w28nSA6-G_OkdwlQfmMd-1" target="w28nSA6-G_OkdwlQfmMd-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-1" value="如果&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;group.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;State &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;== &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208); font-weight: bold; font-style: italic;&quot;&gt;MoeChunkCommonDefine&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;GroupState&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;Finish即下载完成&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="240" y="630" width="720" height="40" as="geometry" />
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.001;entryY=0.597;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="Pk208Q55SN1xYiAjEJWO-5" target="w28nSA6-G_OkdwlQfmMd-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="w28nSA6-G_OkdwlQfmMd-3" target="w28nSA6-G_OkdwlQfmMd-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;MountGroup&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="720" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="w28nSA6-G_OkdwlQfmMd-5" target="-JiWtJ-YC1XUC7bM2xkl-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="w28nSA6-G_OkdwlQfmMd-5" target="-JiWtJ-YC1XUC7bM2xkl-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.998;entryY=0.389;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="w28nSA6-G_OkdwlQfmMd-5" target="r2qw2PplTEnhJ4jCmQF4-4">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1270" y="548" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;MountGroup&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;groupId&lt;span style=&quot;color:#bdbdbd;&quot;&gt;, &lt;/span&gt;bIsAvatarPak&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1080" y="720" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w28nSA6-G_OkdwlQfmMd-8" value="先获取包组信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1255" y="648" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;MoePakManager&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1760" y="80" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;CreateOrGetPakLoader(&lt;span style=&quot;font-size: 15.8pt; white-space: normal;&quot;&gt;pakName&lt;/span&gt;&lt;span style=&quot;font-size: 15.8pt; white-space: normal; color: rgb(189, 189, 189);&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;font-size: 15.8pt; white-space: normal;&quot;&gt;isLogIfAlreadyCreate&lt;/span&gt;&lt;span style=&quot;font-size: 15.8pt; white-space: normal; color: rgb(189, 189, 189);&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1720" y="570" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;TryMountPak&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2555" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-7" value="底包不需要mount&lt;div&gt;只有静态包或者普通包需要进行相应的&lt;/div&gt;&lt;div&gt;mount&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2400" y="730" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-11" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15.8pt;&quot;&gt;MoeNormalPakLoader&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2517.5" y="80" width="195" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-JiWtJ-YC1XUC7bM2xkl-12" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:15.8pt;&quot;&gt;IsMounted&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2780" y="700" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
