<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0" version="25.0.0" pages="5">
  <diagram name="类与数据结构UML" id="ZvRVtKMHqjIb7jlLaT23">
    <mxGraphModel dx="6388" dy="1950" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-53" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePufferManager&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PufferInstanceMap:TMap&amp;lt;int32, PufferInstance&amp;gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;msdkConfig:MoeMSDKConfig&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;MoePufferCommonUtils&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;pufferInsMap&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;对象与id的对应&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&lt;/span&gt;&lt;/font&gt;__pufferKeyIdMap&amp;nbsp; //puffer的key与id的对应&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;initWaitListQue&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;等待初始化列表&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;pufferFileMap&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;pufferChunkMap&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;openMaxLimit&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;commonConf&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;__PufferBasePath&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;mioTM3kfGvBqRCMZXeb5&quot;&gt;+&amp;nbsp;msdkConfig&amp;nbsp; //&lt;/font&gt;&lt;b style=&quot;background-color: initial; font-size: 12px; text-align: center;&quot;&gt;MoeMSDKConfig&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ CreatePufferInstance():int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ DestroyPufferInstance():int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PausePufferInstance(int32 id):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ResumePufferInstance(int32 id):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ResetPufferInstance(int32 id):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPufferInstance(int32 id): PufferInstance&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;GetPakFileMergeState(pakName)&amp;nbsp; //是否需要合并&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;CreatePuffer(commonConf)&amp;nbsp; //根据&lt;b style=&quot;text-align: center;&quot;&gt;MoeMSDKConfig&lt;/b&gt;创建pufferinstance对象池&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;OpenMaxSpeedLimit(bOpen)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;是否开启最大限速进行下载&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;PausePuffer(pufferId, tag)&amp;nbsp; //暂停puffer&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;ResumePuffer(pufferId, tag)&amp;nbsp; //恢复puffer&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;+&amp;nbsp;ResetPuffer(pufferId)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;重新初始化&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;初始化失败重试调这个&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;StartDownloadPak(params)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;下载指定&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;pakName&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;PauseDownloadPak(pakName, mutexTag)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;暂停&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;下载&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;jgegVupZVu7GeprIliL_&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;GetPufferByChunkName(chunkName)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;chunkName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;实例&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-300" y="920" width="480" height="500" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-54" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakLoader&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（pak加载器，与pak属于一对一的关系，执行mount、下载、合并等操作,本质上是个装饰器）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ pufferInstance:MoePufferInstance&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ MergeType: EMergeType // 马上，lazy&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;PakName&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;PufferInstance&amp;nbsp; //puffer加载器&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;RefCount&amp;nbsp; //引用计数&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;RefTag&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;当前&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;关联的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Tag&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;，可以用于查询&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;卸载所有&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Tag&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;LoaderState&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;当前&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;的加载状态&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;MergeType&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;当前&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Pak&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Merge&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;类型 是立刻&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Merge&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;ChunkName&amp;nbsp; //包组名&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;IsStatic&amp;nbsp; //静态包&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;IsInContentBase&amp;nbsp; //是否在底包&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;LocalPath&amp;nbsp; //本地加载地址&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;PakMergeTask&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;HrNJluUpwnu2QOdzRBSb&quot;&gt;+&amp;nbsp;DownloadOrder&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ LoadPakFromRemote():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ LoadPakFromLocal():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StartDownLoadTask():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StopDownloadTask():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ OnDownloadFinish():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ MountPak(): bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ UnMountPak():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsPakMounted():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsPAKFileReady(): bool //pak已经下载，还没调用ue的mount&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ SetPakLoadSchedule():void //设置pak加载的方案（优先从远端下载/强制从远端下载,无论本地是否拥有，远端没有，再从本地加载，本地加载的搜索路径是（文件夹路径））&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ DeletePakFile():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsPakCanDelete():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakFileSize():float&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ IsStaticPak():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-760" y="330" width="530" height="530" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-55" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeMSDKConfig&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（设置下载配置puffer与dolphin）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;Struct_PufferVO: puffer信息的结构体&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;gywqxVKAuNaPn6M9sK-j&quot;&gt;+&amp;nbsp;PufferVOMap: 已配置的puffer信息&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;gywqxVKAuNaPn6M9sK-j&quot;&gt;+&amp;nbsp;DolphinVO： dolphin信息&lt;/font&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 13.5pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ RegistPufferVO(PufferVO VO):bool&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;修改puffer信息&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ RegistDolphinVO(DolphinVO VO) : bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetCurrDolphinVO():DolphinVO&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPufferVO(int32 id):PufferVO&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-320" y="1770" width="530" height="210" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-56" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;MoeDophinVO:struct&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;field1 = value1&lt;br&gt;field2 = value2&lt;br&gt;field3 = value3&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-310" y="2030" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-57" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;MoePufferVO:struct&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;field1 = value1&lt;br&gt;field2 = value2&lt;br&gt;field3 = value3&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-30" y="2030" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-58" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePufferInstance&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（与puffer服务器一对一，几乎一个玩法一个puffer，一次性下载几个由FMoePufferInstance决定）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ DownLoadTasks:TMap&amp;lt;int32,MoePufferDownloadTask&amp;gt; 每个pak都是一个下载任务&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Priority: int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ CurrState: EPufferInstanceState&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ RemotePakVersVO: MoePakVersionVO&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ CurrentPakVersVO: MoePakVersionVO&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ pufferType:EPufferType // 0 ：默认puffer， 1：feature puffer&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ id:int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;fPuffer&amp;nbsp; //UE中的pufferInstance，真正进行下载工作的对象&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Init():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Close():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Puase():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Resume():void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetDownlaodTask(int32 TaskId):MoePufferDownloadTask&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ CreateDownloadTask():int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ DestroyDownloadTask(int32 id):bool&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;OnUpdatePakDownloadList()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;StartDownloadTask(params)&amp;nbsp; //下载&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;CheckDiffFileHasFailed(diffFileName)&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;判断是否二进制差异更新失败&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="240" y="730" width="490" height="350" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-59" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePufferDownloadTask&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（与pak一对一，只是一个下载任务，不进行下载操作）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Priority:int32&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ CurrState:EPufferDownloadTaskState&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- OnDownloadFinish:Action&amp;lt;bool&amp;gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;taskId:int32&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Fp_C_VXdC96tK1e_ZezK&quot;&gt;+&amp;nbsp;taskState:&lt;b style=&quot;text-align: center;&quot;&gt;EPufferDownloadTaskState&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Fp_C_VXdC96tK1e_ZezK&quot;&gt;&lt;b style=&quot;text-align: center;&quot;&gt;+&amp;nbsp;&lt;/b&gt;pakFile&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Fp_C_VXdC96tK1e_ZezK&quot;&gt;+&amp;nbsp;priority&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StartDownload(Action&amp;lt;bool&amp;gt; OnDownloadFinish):bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ StopDownload():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PauseDownload():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ResumeDownload():bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ FinishDownload():bool&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="760" y="1020" width="402.5" height="270" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-60" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakManager&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（pak单包管理器，全局单例，主要是下载和mount两部分）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakLoaderMap:TMap&amp;lt;FString,MoePakLoader&amp;gt;&amp;nbsp; //每个pak的加载器列表&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PufferManager:MoePufferManager&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ msdkConfig:MoeMSDKConfig&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;+&amp;nbsp;PufferManager&amp;nbsp; //puffer对象管理器&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakLoader(FString PakName):MoePakLoader&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakLoaders(TArray&amp;lt;FString&amp;gt; PakNames) :TArray&amp;lt;MoePakLoader&amp;gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PreparePakFiles(mergetype,TArray&amp;lt;FString&amp;gt; PakName):void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;（&lt;span style=&quot;background-color: initial;&quot;&gt;Download + Merge&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;）&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;GetPakLoaderList(inChunkName)&amp;nbsp; //&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;ChangeDownloadLevel(inPakName, inTaskLevel)&amp;nbsp; //修改下载优先级&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;DeleteFile(inPakName, bCanReDownload)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;MountPak(inPakName)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;FFCzMMd8Jv6xjD_hLUZD&quot;&gt;+&amp;nbsp;UnMountPak(inPakName)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;mount 异步+同步&amp;nbsp; &amp;nbsp;1pakname 2 callback 3 isAutoPrepare&amp;nbsp; &amp;nbsp;当触发下载的时候，Push一个Event&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-1370" y="480" width="520" height="300" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-61" value="GM指令，这里缓存了Mount的状态，以防有其他用户会自己调用ue的mount方法，从而导致mount和unmount 的缓存状态不太对，所以，这里需要加一个gm指令可以在某些时刻全局检查一下当前的mount和unmount是否跟ue里记录的状态正确；&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;" parent="1" vertex="1">
          <mxGeometry x="-650" y="30" width="490" height="170" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-62" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeChunkGroupManager&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（pak包组管理器，全局单例，同时也是各个shedule对外的一个装饰器）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakManager：MoePakManager //pak加载管理器&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;matchInfoNonessentialpakGroupCheckCache&amp;nbsp; //？&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;+&amp;nbsp;CurChunkGroupConfigMap&amp;nbsp; //&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupDownloadSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupMountSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupUISchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupShaderSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupSceneSchedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;aDepDraCx0kL4tXVB6CO&quot;&gt;+&amp;nbsp;MoeChunkGroupDeleteSchedule&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;包组信息相关：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;font-size: 13px; font-family: Mebcg4QQO1nsYdmMe52B; background-color: initial;&quot;&gt;+ InitChunkGroupConfigMap（）&amp;nbsp; //初始化所有包组信息&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;font-size: 13px; font-family: Mebcg4QQO1nsYdmMe52B; background-color: initial;&quot;&gt;+GetChunkGroupConfigMap（） //获取所有包组信息&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ GetChunkGroupConfigItem（inGroupId） //获取当前包组&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ IsInAppByPlatforms（downloadPlatforms） //当前包组是否需要下载，&lt;font color=&quot;#ff0000&quot;&gt;暂时存疑&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ IsInApp（InPathPakName） //&lt;/font&gt;&lt;span style=&quot;color: rgb(255, 0, 0); font-family: Mebcg4QQO1nsYdmMe52B; background-color: initial;&quot;&gt;暂时存疑&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;puffer相关：&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;+ CheckAllPufferIsReady（） //检查所有的puffer是否都准备好了&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;shedule相关：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;+ InitSchedule（inSchedule） //初始化所有shedule&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ ClearSchedule（inSchedule）清除所有shedule&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;包组状态相关：&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ GetGroupsDownloadSize（groupIds） //获取多个包组的下载总进度&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;+ CheckGroupStateAndMount（groupId） //&lt;span style=&quot;font-style: italic;&quot;&gt;检测包组资源状态并尝试&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;mount&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckGroupStateAndMountAndCancelDelete（groupId） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;检测包组资源状态并尝试mount且自动移除删除标记&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;GetChunkGroupState（groupId， bRecheckState） //重新刷新包组信息或不刷新并获取包组状态&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;IsChunkGroupReady（groupId， bRecheckState） //包组是否已经下载完成&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckPak（pakName） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;检查pak包是否存在，以及是否已经mount&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;界面相关：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ShowInMgrGroupsReward（） //下载管理界面是否有未领取的奖励&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ShowInMgrGroupsFinished（） //下载管理界面显示下载任务是否已经全部完成&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ClearShowInMgrGroupsReward（） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;清除下载管理界面任务的奖励状态&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;GetALLMainUIGroup（） //获取主界面UI包组&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckMianUINeedDownload（UIName） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;对应UI是否要下载分包资源&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;GetMainUINeedDownLoadGroup（UIName） //根据UI获取需要下载的pak&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;CheckShowInMgrGroupsDownloadFinish（） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;下载管理界面的任务下载完成的回调&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;ReportShowInMgrGroupsDownloadFinish（taskId） //&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;客户端上报下载任务已完成&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;Mebcg4QQO1nsYdmMe52B&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font&gt;&lt;/font&gt;&lt;/p&gt;&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;RegisterEvent:&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;+ OnSwitchScene():ON_REAL_SWITCH_SCENE&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;+ OnTryReconnect()：Global&lt;span style=&quot;font-size: 14.3pt; white-space: normal; color: rgb(189, 189, 189);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space: normal;&quot;&gt;OnGameNetworkTryReconnnect&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;font-size: 14.3pt; white-space: normal;&quot;&gt;+&amp;nbsp;&lt;/span&gt;OnGameServerConnected():OnGameServerConnected&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;+ OnGameServerConnected():ON_PLAYER_AFTER_LOGIN_NTF&lt;/pre&gt;&lt;/div&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;意义不明&lt;/font&gt;：&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;+ GetNonessentialpakGroupCheckInfo（matchTypeId） //获取MatchData非必要包组check信息&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;+ SaveNonessentialpakGroupCheckInfo（matchTypeId， val） //修改MatchData非必要包组check信息&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;+ IsInWaitSceneDownloadChunkGroups（inGroupId）&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-2780" y="460" width="740" height="1340" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-63" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;EPufferInstanceState&lt;/span&gt;&lt;b&gt;:Enum&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Invalid =&amp;nbsp; 0, //不可用状态&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Initing = 1, //等待初始化完成&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;InitFailed = 2, //初始化失败&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Ready&lt;/span&gt;= 3,&amp;nbsp; //初始化完成，可以开始下载获取数据了&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Downloading = 4, //下载数据中&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Closed/WaitDestroy = 5 , -- puffer已经关闭了初始化相关数据&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="270" y="1140" width="390" height="130" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-64" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakVO&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakName:FString&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakSize: float&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ PakMd5: FString&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- isStaticPak:bool&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-100" y="140" width="160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-65" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeGameManager&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ ChunkGroupManager:ChunkGroupManager&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ MoePakManager&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ GetPakNameListFromFeatureName(FString FeatureName)&amp;nbsp; //配置1： 玩法模式表， 配置2： FeatureInfo.json&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-2630" y="-290" width="350" height="130" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-66" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoePakMergeTask&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;（处理pak的合并的具体操作，合并和移动）&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ state: 现在正在进行的状态&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;diffPakFile：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;filePath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;diffFileDownloadPath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;pakFileDownloadPath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;mergeFilePath：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;pufferMD5：puffer下载下的资源的md5信息&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;errorCode：上一次任务合并失败的原因，失败后会重新下载&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;tickMergeLoopTimeHandle：每0.5s执行一次OnTickMerge的循环定时器&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;taskId：C++端创建的merge任务的id&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoMerge()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;UpdateMerge()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoMoveFile()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoFinished()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;DoFailed()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;ChangeMergeTaskState(state)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;OnTickMerge&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-180" y="490" width="370" height="360" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-67" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MoeAssetConst&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field: Type&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method(): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="220" y="170" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-68" value="Pak下载，加载" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=19;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1280" y="1640" width="880" height="250" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-69" value="Puffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1250" y="1704" width="590" height="160" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-70" value="Pak Merge" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-640" y="1710" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-71" value="Pak的校验，解密等" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-640" y="1794" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-72" value="Pak管理器，管理Pak的加载，下载，mount，unmount" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;" parent="1" vertex="1">
          <mxGeometry x="-1280" y="1510" width="880" height="120" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-73" value="Pak的使用方，各玩法，各系统，可以直接去获取pak的状态，mount，unmount pak，也可以通过chunkgroupmanager来访问pak" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="-1280" y="1330" width="640" height="150" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-74" value="下载面板系统" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1270" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-75" value="MoeGameManager 玩法管理" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1120" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-76" value="玩法自己的pak管理器&lt;div&gt;MobaPakManager，在玩法内部根据pak的名字去使用pak&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-620" y="1330" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-77" value="系统功能" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-970" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-78" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupDownloadSchedule&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;（全局唯一，管理包组下载相关信息）&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;_pendingCallbackChangeInfo&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;bInitChunkGroupsCheckStateFinished&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+ CurChunkGroup信息映射&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+CurChunkGroupInfoMap&amp;nbsp; //所有需要下载的包组与包组信息字典&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;PufferNotReadyDownloadGroupIdList&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;WaitSceneDownloadGroupIdList&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;pakRefGroupMap&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+ 自动下载配置&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;+&amp;nbsp;resultCalls&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;任务结果注册唯一&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;id&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;progressCalls&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;任务进度回调&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;progressRegisterId&amp;nbsp; //&lt;span style=&quot;font-style: italic;&quot;&gt;任务进度注册唯一&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;id&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;&lt;font face=&quot;YnaZwo0yNkk2F0q75lxV&quot;&gt;&lt;i&gt;serverConnectedTimer&amp;nbsp; //&lt;font color=&quot;#ff0000&quot;&gt;上一次连接上GS的时间？&lt;/font&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(189, 189, 189); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt;&quot;&gt;获取下载信息相关：&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;GetOrCreateGroupDownloadInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;， &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208);&quot;&gt;reCheck&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;） --&lt;/span&gt;&lt;span style=&quot;color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38);&quot;&gt;获取包组资源下载信息，&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic;&quot;&gt;reCheck &lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace;&quot;&gt;刷新状态比较耗时&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(208, 208, 208); font-family: 宋体, monospace;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace;&quot;&gt;内部有很多高频的查询状态需求，传&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic;&quot;&gt;false&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-style: italic; font-family: 宋体, monospace;&quot;&gt;避免不必要的刷新&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;GetIsInAppDownloadInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;group&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;）：包组是否在app中就已经下载完了&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;GetOrCreateChunkGroupInfo&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(57, 204, 155);&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 14.3pt; background-color: rgb(38, 38, 38); color: rgb(189, 189, 189);&quot;&gt;）：&lt;/span&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;获取包组信息&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;puffer相关：&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;OnHandlePufferInitSuccess(pufferId, pufferBasePath, pakList, versionPath)&amp;nbsp; //某个pufferinstance初始化成功后的回调，会依次调用&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckDownloadPufferNotReadyChunkGroup()、&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;初始化&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;autoDownloadConfig、&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckAutoDownloadChunkGroup()、&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckMountStaticPaks()&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;、和触发&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;ON_EVENT_UI_DOWNLOAD_RESOURCE_REQ_REFRESH的回调事件&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;font&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;CheckPufferNotReadyNeedReturn(inGroupId, inTaskLevel, isAuto)&amp;nbsp; //检查下载该资源的puffer是否准备好了，如果没有准备好就把包组从&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;PufferNotReadyDownloadGroupIdList中删除并重新将包组id和&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;i style=&quot;background-color: initial; color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px;&quot;&gt;inTaskLevel重新加入该列表，并返回true，如果puffer准备好了，就返回false&lt;/i&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;i style=&quot;background-color: initial; color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px;&quot;&gt;+&amp;nbsp;&lt;/i&gt;&lt;font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;IsPufferReadyByGroupId(inGroupId, failReset)&amp;nbsp; //使用&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;MoeAssetsUtils的接口判断相应的puffer是否准备好了&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-size: 19.0667px; font-style: italic;&quot;&gt;连接服务器相关：&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 19.0667px; background-color: rgb(38, 38, 38); color: rgb(133, 196, 108); font-family: 宋体, monospace; font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot;&gt;&lt;i style=&quot;&quot;&gt;&lt;font color=&quot;#85c46c&quot;&gt;OnTryReconnect（）：重新连接后的回调，&lt;/font&gt;&lt;font color=&quot;#ff0000&quot;&gt;关注连接上了什么？&lt;/font&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;OnGameServerConnected（）：连接上服务器的回调&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;span style=&quot;font-size: 19.0667px;&quot;&gt;&lt;i&gt;包组状态相关：&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;span style=&quot;font-size: 19.0667px;&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;IsInitChunkGroupsCheckStateFinished（） //是否还有包组是否需要检测是否需要下载&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;包组下载状态相关：&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;+&amp;nbsp;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;ChangeAutoPauseState（autoPause）：是否把？？？&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 19.0667px;&quot;&gt;&lt;font face=&quot;宋体, monospace&quot; color=&quot;#85c46c&quot;&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-3770" y="1700.5" width="660" height="849.5" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-79" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupMountSchedule&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;（全局唯一，管理包组mount相关信息）&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;MountedStaticPaks&amp;nbsp; //静态mount的pak&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;-vUy2ofsnWeSPUeNyJSD&quot;&gt;+&amp;nbsp;MountedGroups&amp;nbsp; //动态mount的pak&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-3960" y="1410" width="390" height="200" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-80" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;PreDownloadInGameApplyModel&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;用于判断资源是否预下载好&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field1: Type&lt;br&gt;+ field2: Type&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="770" y="720" width="260" height="160" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-81" value="&lt;div style=&quot;font-size: 13px; line-height: 100%;&quot;&gt;&lt;pre style=&quot;text-align: center; line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;EMoePakMergeType：Enum&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center; line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;下载后的合并时机&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px; line-height: 100%;&quot;&gt;&lt;div style=&quot;font-size: 13px; line-height: 100%;&quot;&gt;&lt;pre style=&quot;line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;UFUUev-My0rZtlc6DxNT&quot;&gt;  Immediately：下载后立即合并&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 100%;&quot;&gt;&lt;pre style=&quot;line-height: 100%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;UFUUev-My0rZtlc6DxNT&quot;&gt;  Lazy：下载后统一合并&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-1560" y="220" width="260" height="140" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-82" value="&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font face=&quot;Helvetica&quot; style=&quot;font-size: 13px;&quot;&gt;&lt;b&gt;MoeAssetsUtils&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font face=&quot;Helvetica&quot; style=&quot;font-size: 13px;&quot;&gt;&lt;b&gt;提供资源管理相关的适配器，同时提供给外界查找和调用相关信息的接口&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;EventDefine: 事件名映射&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;DiskSpaceUnit: 存储大小&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;静态方法：&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;DeepCopy(SrcTable): 深拷贝&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;Log(...): log全家桶&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;ProtectTable(t)：&lt;span style=&quot;font-style: italic;&quot;&gt;返回一个只读的&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;Table&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;，一般用于枚举，读表等情况，防止修改&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;GetAutoDownload()：是否自动下载&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadOnlyWifi()：&lt;span style=&quot;font-style: italic;&quot;&gt;获取&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;onlywifi&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;字段&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;ChangeDownloadOnlyWifi(value)：&lt;span style=&quot;font-style: italic;&quot;&gt;修改&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;onlywifi&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;字段&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;IsWifi()：&lt;span style=&quot;font-style: italic;&quot;&gt;检测是否为&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;wifi&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;环境&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;IsEditor(bUseForceDownload)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetPufferKeyByGroupId(groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckPufferIsReadyByGroupId(pakMgr, groupId, failReset)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;再通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;是否初始化完成&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;IsPufferInitialingByGroupId(pufferMgr, groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;再通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;featureName&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;获取到对应&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;是否初始化完成&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckPufferIsInitialingByGroupId(pakMgr, groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;判断&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;puffer&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;是否正在初始化&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckPufferIsReadyByPakName(pakMgr, pakName, failReset)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;CheckIsInAPP(groupId)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDefaultDownloadInfo(groupId)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadPriority(taskLevel)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetRecaculatePriority(oldPriority, newTaskLevel)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadPriorityByOrder(priority, newTaskLevel)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetDownloadOldTaskLevel(oldPriority)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;UpdateCacheJson(basePath, key, val)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;SaveCacheJson(basePath, table)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetCacheJson(basePath)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;GetChunkGroupConfigState(basePath, groupId)：&lt;span style=&quot;font-style: italic;&quot;&gt;获取本地缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;+&amp;nbsp;&lt;/span&gt;CheckChunkPuffersIsBusy()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;IsForceOpenPufferDownload()：&lt;span style=&quot;font-style: italic;&quot;&gt;静默资源包下载完毕&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+&amp;nbsp;ForceAutoGroupDownloadDone()&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;ImCB2FSHXsTO1dE28jeQ&quot;&gt;+ ......&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1060" y="160" width="680" height="650" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-83" value="&lt;pre style=&quot;text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;EMoeChunkGroupDownloadTaskPriorityLevel：Enum&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;text-align: center; line-height: 9.6px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;下载优先级&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;Helvetica&quot;&gt;Avatar_Shop = 1&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Avatar_Local = 2&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Team = 3&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Normal = 4&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Avatar_Other = 5&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px; line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;div style=&quot;line-height: 80%;&quot;&gt;&lt;pre style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px; background-color: rgb(255, 255, 255);&quot; face=&quot;cmhQicWZsKfiRdKMIkgb&quot;&gt;Auto = 6&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-1397.5" y="-120" width="405" height="220" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-84" value="&lt;pre style=&quot;font-size: 13px; text-align: center; line-height: 140%;&quot;&gt;&lt;font style=&quot;background-color: rgb(255, 255, 255);&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkCommonDefine&lt;/b&gt;&lt;/font&gt;&lt;/pre&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;blockquote style=&quot;margin: 0px 0px 0px 40px; border: none; padding: 0px; line-height: 140%;&quot;&gt;&lt;pre&gt;&lt;span style=&quot;font-size: 13px; line-height: 140%;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;ChunkDownLoadCacheFileName = &quot;fef7f7499fe44f1b5e030c0ab9beca84&quot;,  --资源cache信息目录&lt;br&gt;PufferRootPath = StartUpPufferConf.PufferRootPath,&lt;br&gt;MD5JsonFileName = StartUpPufferConf.MD5JsonFileName, -- 存储下载状态Json文件名&lt;br&gt;PlayLabelPlatformKey = &quot;platform&quot;,&lt;br&gt;PlayLabelIOSName = &quot;IOS&quot;,&lt;br&gt;PlayLabelAndroidName = &quot;Android&quot;,&lt;br&gt;DefaultPufferName = StartUpPufferConf.DefaultPufferName,&lt;br&gt;DiffLimitDeviceLevel = 4,&lt;br&gt;DiffLimitSize = 1000,&lt;br&gt;ChunkGroupStateTickCount = 8, -- 每一帧检测几个包组&lt;br&gt;DownloadMaxLimit = 6,&lt;br&gt;DownloadPerLimit = 3,&lt;br&gt;BasePriorityMulRatio = 100000000,&lt;br&gt;SimpleDownloadLimit = 10 * 1024 * 1024,&lt;br&gt;-- DefaultVersion Json&lt;br&gt;DefaultVersionJsonFilePath = &quot;Content/LetsGo/Script/StartUp/Config/Version.json&quot;,&lt;br&gt;DontDownloadGroupFileName = &quot;f26742340f61a9c07dc1eba8959aa34f&quot;, -- Dontdownloadfile&lt;br&gt;&lt;br&gt;&lt;br&gt;OldMD5JsonFileName = &quot;50ff1780358c438a1efc10302ec73bf1&quot;,&lt;br&gt;OldMoePufferPathFileName = &quot;%50%75%66%66%65%72&quot;, -- s8之前的主puffer目录&lt;br&gt;OldFeaturePufferPathFileName = &quot;%50%75%66%66%65%73&quot;, -- s8之前的副玩法puffer目录&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/blockquote&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-2150" y="-320" width="710" height="490" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-85" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoePufferCommonUtils&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;puffer使用的关于下载、缓存、任务回调相关的适配器&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;EventCallBackMap&lt;/span&gt;：function puffer回调事件&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+ field2：类型&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;FetchDownloadDefaultOrder&lt;/span&gt;（int）：获取当前任务的优先级，默认为上一个+1&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;RemoveExtraFiles&lt;/span&gt;（Type， Type）：删除多余pak&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetPakPlatformName ：获取平台后缀&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMaxTaskLimit ： 获取最大任务数量&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckFileIsReady（bool）&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;：文件是否准备好，本地与puffer一致&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;LoadMd5CacheInfo ： 加载本地MD5缓存&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;SaveMD5CacheFileInfos ： 下载完后更新一些本地md5缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;SaveMD5CacheInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载完后更新单个本地md5缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;SaveMD5CacheInfoByMd5 ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载完后更新单个本地md5缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;RemoveMD5CacheInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;清除指定文件的缓存信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMD5CacheInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取本地缓存md5信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetSortedDownloadTasksInfo ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取并排序下载任务的优先级&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetDownloadTaskMutexTagList&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetAvailableDownloadTaskMutexTag ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;查询是否有可用的mutexTag&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ChangeMaxSpeedDownload&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetSourceChunkName&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;IsInContentBasePak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;slPh7RONRCmrdLSgt80P&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;DeepCopy&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;color: rgb(106, 153, 85); background-color: rgb(30, 30, 30); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;color: rgb(220, 220, 170); background-color: rgb(30, 30, 30); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="270" y="1360" width="490" height="410" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-86" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoePufferConst&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;puffer相关的枚举&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ E_PufferDownloadTaskState ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Puffer下载任务状态&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;E_PufferConnectState ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Puffer实例初始化状态&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;E_PufferUsualState ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;puffer的常态，初始化结束之后的状态&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;E_PakMergeState ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;pak目前处于merge的哪一过程&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;E_PakLocalState ：pak的下载状态，未下载、部分下载、下载完成 &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;E_PakLoaderMergeState ：目前能不能进行merge或者下载&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;E_PufferEventKey ： puffer相关的事件的key&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;E_PakRefTagType&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Struct_PakVO ： pak的信息&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;wG-ThMr0IQ7woWTU0qre&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Struct_PakVersion ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Pak版本信息&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-300" y="1480" width="470" height="230" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-87" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupMountSchedule&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;统一进行包组的mount与unmount操作&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Owner&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;PakManager&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoePakManager&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountedStaticPaks&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountedGroups&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckMountStaticPaks &lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;检测并mount默认（静态）mount的包组，该函数是不是会多次执行？&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountGroup&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;Mount包组中的所有pak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UnMountGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UnMount包组中的所有pak&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;IsMounted&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UnMountAllGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ignoreGroupList&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ignoreGroupList为&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;不会被unmount的列表&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MountGroups&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GroupIds&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;JODBLIUlCVhD2kTtNdMu&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMountedGroups&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4490" y="350" width="470" height="320" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-88" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupSceneSchedule&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;b&gt;执行切换场景是与chunk相关的任务&lt;/b&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;所有者&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-size: 13px; white-space: pre;&quot;&gt;&lt;font face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;sceneDownloadType  //&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnSwitchScene&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;sceneName&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;）：&lt;/span&gt;类型&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;InDownloadScene&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;downloadScene&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;）：&lt;/span&gt;类型&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;+&amp;nbsp;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetDownloadSceneType&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;（&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;sceneName&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;）：当前要眺转到哪个场景，&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;GRlW3fF3YkgWDjY2PeiB&quot;&gt;据此判断需要mount的包&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4570" y="770" width="470" height="170" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-89" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupShaderSchedule&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;&lt;b&gt;负责执行chunk发生改变时，需要对shader做的操作&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;owner&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ReloadShaderCode&lt;/span&gt;（）：每次mount包组后都需要重新&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;加载ShaderLib&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;font face=&quot;RELAgWFsJvdtGb-JRllp&quot;&gt;+&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt; &lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;LgHsMGE7hj-lfj-5sVJT&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnHandleReloadShader（）：需要重新加载shader，目前只有&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ReloadShaderCode&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4575" y="1000" width="480" height="140" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-90" value="&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;MoeChunkGroupUISchedule&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; line-height: 19px; white-space: pre; font-size: 13px;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;执行UI界面的下载任务，UI为什么要单独列一个schedule？&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;owner&lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;MoeChunkGroupManager&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+ field2：类型&lt;/font&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style: solid; font-size: 13px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetShowInMgrGroups &lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取所有在下载管理界面显示的下载包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;+&amp;nbsp;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ShowInMgrGroupsDownloading &lt;/span&gt;：&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载管理界面是否有下载中的包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ShowInMgrGroupsNeedDownload ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;下载管理界面是否有未下载完成的包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckShowInMgrGroupsDownloadState ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;任务下载完成时，重新检测一下对应的下载管理任务&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetGroupTabid ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取资源包的tab id&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetGroupDownloadState&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupId&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取资源包的下载状态&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GotoAndDownloadGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;groupIds&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;开始下载并跳转到指定group&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckMainUIResource&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UIName&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;主界面UI 分包检测&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetALLMainUIGroup ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取主界面UI包组&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckMainUINeedDownload&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UIName&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;对应UI是否要下载分包资源&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;GetMainUINeedDownLoadGroup&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;UIName&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;获取UI要下载的分包ID&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnLoginDoneHandler&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;CheckShowInMgrGroupsDownloadFinish&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;ReportShowInMgrGroupsDownloadFinish&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;taskId&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;) ： &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;客户端上报下载任务已完成&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; face=&quot;NkO-gVkfYl5i9tvxlsgR&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;+ &lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;OnUpdate&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;deltaTime&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 13px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-4670" y="1300" width="640" height="370" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-91" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.463;exitY=0.993;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.004;entryY=0.398;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-87" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-92" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-88" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3400" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-93" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.007;entryY=0.404;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-89" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-94" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=-0.008;entryY=0.414;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-90" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-95" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.02;entryY=0.396;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-78" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3390" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-96" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.01;entryY=0.406;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RTVj7qtDhxxn7ZNXmpM9-79" target="RTVj7qtDhxxn7ZNXmpM9-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-3750" y="1280" as="sourcePoint" />
            <mxPoint x="-3700" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-97" value="&lt;font style=&quot;font-size: 17px;&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;各个shedule作为MoeChunkManager的各功能模块具体执行的部分&lt;/b&gt;&lt;/font&gt;&lt;div style=&quot;font-size: 17px;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot; face=&quot;GLNBJ8kfbzAfBnB0zOgq&quot;&gt;&lt;b&gt;为MoeChunkManager作为各shedule对外的装饰器&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-3980" y="740" width="530" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-98" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br/&gt;&lt;b&gt;Interface&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;/&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field1: Type&lt;br/&gt;+ field2: Type&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;/&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ method1(Type): Type&lt;br/&gt;+ method2(Type, Type): Type&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="50" y="2290" width="190" height="140" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-99" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;ChunkDownloadWhiteListTable&lt;/i&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;与下载相关的表&lt;/i&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ field1：类型&lt;br&gt;+ field2：类型&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font&gt;+ GetChunkDownloadWhiteListDataById(id)：获取ChunkDownloadWhiteListData完整表格(包含所有分表）&lt;/font&gt;&lt;br&gt;+ method2（Type， Type）：类型&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-4910" y="780" width="290" height="250" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-100" value="&lt;font&gt;下载下载列表中所有资源的按钮&lt;/font&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;下载F-分包中所有&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;显示的资源&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-4380" y="1859" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-101" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;UI_EditorApp_Down:OnClickedBtnMax&lt;span style=&quot;color:#bdbdbd;&quot;&gt;()&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;或&lt;/span&gt;function &lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse; color: rgb(189, 189, 189);&quot;&gt;UI_Resource_Down_SubView&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse; color: rgb(57, 204, 155);&quot;&gt;OnClickedBtnMax&lt;/span&gt;&lt;span style=&quot;font-size: 14.3pt; white-space-collapse: collapse; color: rgb(189, 189, 189);&quot;&gt;()&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-4520" y="1890" width="530" height="120" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-102" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;/p&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;i&gt;MoePakConst.&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;i style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;E_PakMergeState&lt;/b&gt;&lt;/i&gt;&lt;/div&gt;&lt;b&gt;正在进行的merge的状态&lt;/b&gt;&lt;p&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ Invalid: 任务还在创建中&lt;br&gt;+ Wait: 等待中&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Merge：lua端在等待C++中的合并结果&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Move：将旧的.pak和旧的.diff删除，并且让新生成的.pak移动正确的目录 刷新相关本地md5信息&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Finished：完成&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;Failed：merge失败 or Move 失败的回调(删除旧的.pak 和.diff)&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="220" y="300" width="380" height="190" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-103" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoePakConst.EMoeHDiffPatchERR&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+ None：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;Failure：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;NotExist：&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="230" y="530" width="360" height="90" as="geometry" />
        </mxCell>
        <mxCell id="RTVj7qtDhxxn7ZNXmpM9-104" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoePakConst.EPakMergeErrorCode&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;None：正常完成merge，没有出错&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;TaskIDErr： 创建C++端merge任务出错&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;NotExist：&amp;nbsp;filePath、diffFilePath或mergeFilePath路径不存在&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;+&amp;nbsp;MoveErr：C++端删除原&lt;span style=&quot;background-color: initial;&quot;&gt;filePath、&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;diffFilePath目录和迁移&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;mergeFilePath中文件至&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;filePath出错&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="640" y="300" width="333" height="170" as="geometry" />
        </mxCell>
        <mxCell id="CVZIYWeQVlYECD098r73-5" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoeChunkCommonDefine.ChunkGroupInfo&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;包组信息&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Id&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;Type：全是game&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;ChunkGroup：包组中有那些pak&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;State ：（MoeChunkCommonDefine.DownloadState）下载状态，初始时默认下载完成&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadInfo：MoeChunkCommonDefine.GroupDownloadInfo&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;StartTimeStamp：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;IsContinue：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;NeedUpdateDownloadInfo：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;NeedUpdateChunkGroup：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;IsInApp：是否是底包&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadScene：可下载场景，目前有1和0&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-2670" y="-55" width="490" height="245" as="geometry" />
        </mxCell>
        <mxCell id="NEnujJ8a_sMzc4M2gyq3-1" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;MoeChunkCommonDefine.GroupDownloadInfo&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;&lt;u&gt;包组的下载信息&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadState：（MoeChunkCommonDefine.DownloadState）包组下载状态&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;AutoDownload：是否自动下载&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;AutoPause：是否自动暂停&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadSize：下载尺寸&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;DownloadProgress：下载进度&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;HasInited：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;bDeleteAfterReboot：&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;initDownloadSize：本次启动游戏时已下载的尺寸&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-3150" y="-55" width="430" height="195" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="cc5ZF6h4ICKkNvJx_7M4" name="merge开始与失败的流程">
    <mxGraphModel dx="2015" dy="651" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Mw96nbkPMHBybhn6pct--1" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePakManager&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="60" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--3" target="Mw96nbkPMHBybhn6pct--8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--3" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MergePakFile&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="414" y="290" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--5" target="Mw96nbkPMHBybhn6pct--3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;PreparePakLoader&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="290" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--6" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePakLoader&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1110" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--8" target="Mw96nbkPMHBybhn6pct--12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--8" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;StartMerge&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1110" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--9" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MoePakMergeTask&lt;/pre&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1620" y="60" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--12" target="Mw96nbkPMHBybhn6pct--14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.004;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Mw96nbkPMHBybhn6pct--12" target="Mw96nbkPMHBybhn6pct--52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1635" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--12" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;StartMerge&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1430" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--14" target="Mw96nbkPMHBybhn6pct--19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--14" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Merge)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1582.5" y="440" width="225" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1900" y="600" />
              <mxPoint x="1900" y="660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1900" y="600" />
              <mxPoint x="1900" y="780" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--19" value="OnUpdateMergeTaskStateLogic&lt;div&gt;策略模式&lt;/div&gt;&lt;div&gt;根据不同的状态进行不同的操作&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1602.5" y="570" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--21" target="Mw96nbkPMHBybhn6pct--34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--21" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.NotExist)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2020" y="450" width="292" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--22" value="检查diffFilepath、filePath&lt;div&gt;以及这两个目录是否有存在&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1830" y="430" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--23" value="不存在直接返回失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2025" y="418" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--24" value="UE4.UMoeHDiffPatchHelper.MergeDiff_CheckMD5" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2030" y="630" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--25" value="创建文件合并后写入的目录&lt;div&gt;mergeFilePath =&amp;nbsp;&lt;/div&gt;&lt;div&gt;string.format(&quot;%s.%s&quot;, filePath, MoePakConst.MergeResultFileSuffix)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2020" y="535" width="390" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--26" value="调用UE接口&lt;div&gt;创建合并任务的ID&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2320" y="640" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--28" target="Mw96nbkPMHBybhn6pct--34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--28" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.TaskIDErr)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2035" y="750" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--29" value="如果任务id&amp;lt;=0，&lt;div&gt;就说明任务创建失败&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1900" y="733" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--30" value="&lt;div&gt;self.diffFilePath = diffFilepath&lt;/div&gt;&lt;div&gt;self.filePath = filePath&lt;/div&gt;&lt;div&gt;self.mergeFilePath = mergeFilePath&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2056" y="870" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.001;entryY=0.662;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Mw96nbkPMHBybhn6pct--19" target="Mw96nbkPMHBybhn6pct--30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1900" y="600" />
              <mxPoint x="1900" y="910" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--32" value="任务创建成功&lt;div&gt;设置相关变量信息&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2280" y="880" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--34" target="Mw96nbkPMHBybhn6pct--36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--34" value="ChangeMergeFailed" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2590" y="600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--36" target="Mw96nbkPMHBybhn6pct--39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--36" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Failed)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2525" y="770" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--37" value="设置本次合并失败的原因&lt;div&gt;并且调用一下方法&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2640" y="690" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--39" target="Mw96nbkPMHBybhn6pct--43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--39" value="OnUpdateMergeTaskStateLogic" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2545" y="890" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3040" y="920" />
              <mxPoint x="3040" y="1140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--43" value="DoFailed" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2850" y="890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--44" value="删除diffFilePath、filePath、mergeFilePath目录" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3030" y="800" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.36;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Mw96nbkPMHBybhn6pct--43" target="Mw96nbkPMHBybhn6pct--44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--46" value="MoeAssetsUtils" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3480" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--47" value="RemoveMD5CacheInfo&lt;div&gt;(self.diffPakFile)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3475" y="890" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3120" y="1020" as="sourcePoint" />
            <mxPoint x="1270" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--49" value="OnMergeResultCallBack" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3120" y="973" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--50" value="执行结束后的回调" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3050" y="950" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--51" value="RemoveMergeLoopTimeHandle" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3105" y="1110" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--52" value="&lt;div&gt;添加循环定时器，每0.5s执行一次&lt;/div&gt;OnTickMerge" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1690" y="180" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--53" value="&lt;font color=&quot;#ff0000&quot;&gt;为什么要每0.5s执行一次？&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;我认为是此处不需要太过频繁地检测当前merge的过程进行到哪一步了&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1630" y="225" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--54" value="取消循环定时器" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3050" y="1080" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--56" target="Mw96nbkPMHBybhn6pct--61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--56" value="OnHandlePakMergeNotify&lt;div&gt;(errorCode,inPakName,diffPakName)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1070" y="973" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--57" value="MoePufferInstance" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-340" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--58" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;MarkDiffFileSuc&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-340" y="1100" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="Mw96nbkPMHBybhn6pct--58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="Mw96nbkPMHBybhn6pct--64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="vrY5v6D_-oa1d8lEZZJY-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="vrY5v6D_-oa1d8lEZZJY-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--61" target="vrY5v6D_-oa1d8lEZZJY-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="vrY5v6D_-oa1d8lEZZJY-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="1160" as="sourcePoint" />
            <mxPoint x="875" y="1430" as="targetPoint" />
            <Array as="points">
              <mxPoint x="670" y="1161" />
              <mxPoint x="870" y="1161" />
              <mxPoint x="870" y="1430" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--61" value="如果errorCode ==&amp;nbsp;&lt;div&gt;MoePakConst.EPakMergeErrorCode.None&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="530" y="1140" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--62" value="if self.PufferInstance" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="1130" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--64" target="Mw96nbkPMHBybhn6pct--67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--64" value="ChangeLoaderState&lt;div&gt;(EMoePakLoaderState.MergeFailed)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="1080" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Mw96nbkPMHBybhn6pct--67" target="Mw96nbkPMHBybhn6pct--68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Mw96nbkPMHBybhn6pct--67" target="Mw96nbkPMHBybhn6pct--70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--67" value="OnDealChangeLoaderState(MergeFailed)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1160" y="1080" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--68" value="StatusCallBack&lt;div&gt;(self.PakName, oldLoaderStatus, newState)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1665" y="1130" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--69" value="返回true，&lt;div&gt;说明确实需要切换状态&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="1070" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Mw96nbkPMHBybhn6pct--70" value="&lt;div&gt;设置旧的state和新的statue&lt;/div&gt;&lt;div&gt;local oldLoaderStatus = self.LoaderState&lt;/div&gt;&lt;div&gt;self.LoaderState = newState&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1665" y="1040" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-1" value="如果是None，&lt;div&gt;就说明merge成功了&lt;/div&gt;&lt;div&gt;，可以准备mount了&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="395" y="1103" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-2" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#39cc9b;&quot;&gt;ChangeLoaderState&lt;/span&gt;&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-weight:bold;font-style:italic;&quot;&gt;EMoePakLoaderState&lt;/span&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;MountPrepared&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry y="1220" width="410" height="110" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-4" value="否则就是失败了" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="725" y="1118" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-5" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;TryDeleteFile&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="970" y="1170" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-7" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ChangeLoaderState&lt;/pre&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;&lt;span style=&quot;color:#bdbdbd;&quot;&gt;(&lt;/span&gt;EMoePakLoaderState&lt;span style=&quot;color:#bdbdbd;&quot;&gt;.&lt;/span&gt;DownloadPrepared&lt;span style=&quot;color:#bdbdbd;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="970" y="1260" width="390" height="100" as="geometry" />
        </mxCell>
        <mxCell id="vrY5v6D_-oa1d8lEZZJY-9" value="&lt;div style=&quot;background-color:#262626;color:#d0d0d0&quot;&gt;&lt;pre style=&quot;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:14.3pt;&quot;&gt;ReStartDownloadTask&lt;/pre&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="985" y="1400" width="205" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="y3ZbnNyZqMStZnKh7AQm" name="merge循环定时器流程">
    <mxGraphModel dx="1247" dy="789" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="tRXEKPltOArOnr-kAwEP-1" value="MoePakMergeTask" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-3" target="tRXEKPltOArOnr-kAwEP-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-3" value="OnTickMerge" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-4" value="如果self.state ~= MoePakConst.E_PakMergeState.Merge&lt;div&gt;就直接return，说明merge还未开始或者以及结束&lt;/div&gt;&lt;div&gt;不执行以下操作&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="120" y="180" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.667;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="570" y="160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.447;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="570" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="540" y="280" />
              <mxPoint x="540" y="118" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-9" target="tRXEKPltOArOnr-kAwEP-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-9" value="UpdateMerge" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="354" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-10" value="result = UE4.UMoeHDiffPatchHelper.GetMergeResult(self.taskId)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="600" y="60" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-11" value="根据任务id从C++端获取当前合并任务的执行结果" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="600" y="20" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-12" value="如果result == MoePakConst.EMoeHDiffPatchERR.Failure&lt;div&gt;说明merge还在进行中？直接return&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="630" y="100" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-13" value="如果result == MoePakConst.EMoeHDiffPatchERR.None&lt;div&gt;并且mergeFilePath目录存在，说明merge成功&lt;/div&gt;&lt;div&gt;开始move&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="600" y="170" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-15" target="tRXEKPltOArOnr-kAwEP-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-15" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Move)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="900" y="200" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-16" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.NotExist)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="720" y="340" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-17" value="否则说明merge失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="590" y="340" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-19" target="tRXEKPltOArOnr-kAwEP-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-19" value="OnUpdateMergeTaskStateLogic" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1241" y="200" width="189" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1510" y="370" />
              <mxPoint x="1510" y="400" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-23" value="DoMoveFile" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1276" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-24" value="先判断diffFilePath和filePath是否存在，&lt;div&gt;如果不存在&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1396" y="283" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-25" value="ChangeMergeFailed(MoePakConst.EPakMergeErrorCode.NotExist)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1650" y="290" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-26" value="&lt;div&gt;删除本地存储目录和下载patch文件目录下的文件和将合并后的文件移到本地存储目录&lt;/div&gt;&lt;div&gt;local retDelOldFile = UE4.USPLuaUtility.DeleteFile(self.filePath)&lt;/div&gt;&lt;div&gt;local retDelDiffFile = UE4.USPLuaUtility.DeleteFile(self.diffFilePath)&lt;/div&gt;&lt;div&gt;local retMoveFile = UE4.UMoeReplayBPFunctionLibrary.MoveFile(self.mergeFilePath, self.filePath)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1600" y="365" width="550" height="70" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-30" target="tRXEKPltOArOnr-kAwEP-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-30" target="tRXEKPltOArOnr-kAwEP-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-30" target="tRXEKPltOArOnr-kAwEP-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-30" value="如果if retDelOldFile and retDelDiffFile and retMoveFile" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1620" y="488" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.003;entryY=0.545;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-23" target="tRXEKPltOArOnr-kAwEP-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-32" value="MoeAssetsUtils" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2495" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-33" value="RemoveMD5CacheInfo&lt;div&gt;(self.diffPakFile, false)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2465" y="420" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-34" value="SaveMD5CacheInfo(self.pakFile, self.pufferMD5, self.filePath)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2460" y="555" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-36" target="tRXEKPltOArOnr-kAwEP-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-36" value="ChangeMergeTaskState&lt;div&gt;(MoePakConst.E_PakMergeState.Finished)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2068" y="660" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-37" value="ChangeMergeFailed&lt;div&gt;(MoePakConst.EPakMergeErrorCode.MoveErr)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1610" y="615" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-38" value="否则就是在删除文件&lt;div&gt;或者move操作中出错了&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1475" y="593" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tRXEKPltOArOnr-kAwEP-40" target="tRXEKPltOArOnr-kAwEP-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-40" value="OnUpdateMergeTaskStateLogic" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2107" y="780" width="182" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-43" target="tRXEKPltOArOnr-kAwEP-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tRXEKPltOArOnr-kAwEP-43" target="tRXEKPltOArOnr-kAwEP-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-43" value="DoFinished" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1840" y="780" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-44" value="OnMergeResultCallBack&lt;div&gt;(MoePakConst.EPakMergeErrorCode.None, self.pakFile, self.diffPakFile)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1398" y="710" width="256" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-45" value="RemoveMergeLoopTimeHandle" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1411" y="850" width="189" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-46" value="执行merge完成后的回调" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1615" y="708" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tRXEKPltOArOnr-kAwEP-47" value="删除循环计时器" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1600" y="840" width="110" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="UyM8k2Oa14alGE7s-cyv" name="下载流程">
    <mxGraphModel grid="1" page="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="5cEbv5X1kibHwalH5eq4-1" value="MoeChunkGroupManager" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-330" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-2" target="5cEbv5X1kibHwalH5eq4-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-2" value="StartDownloadGroupList" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="250" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-3" value="下载一堆包组，&lt;div&gt;一般用于下载显示在下载界面的所有包组&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-20" y="190" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-4" value="MoeChunkGroupDownloadSchedule" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="-330" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="5cEbv5X1kibHwalH5eq4-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="DKOrTGj42sUnfdID28H5-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-5" value="StartDownloadGroupList" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="250" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="5cEbv5X1kibHwalH5eq4-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="EBJCk_LxA7f1i_R0lV7n-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="zegwxUL89KQ7tsU-fR5h-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-6" value="GetOrCreateGroupDownloadInfo&lt;div&gt;(groupId, reCheck)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="710" y="170" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-9" value="遍历每一个包组&lt;div&gt;先获取包组的下载信息&lt;/div&gt;&lt;div&gt;包括当前处于哪一种下载状态和&lt;div&gt;还需要下载的多大&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="530" y="123" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-10" value="reCheck&#39;为false，&lt;div&gt;就可以略过很多高耗时的操作&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;我认为这些高耗时的操作主要是获取&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;已下载文件的大小&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="710" y="70" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-11" value="GetOrCreateChunkGroupInfo(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="40" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5cEbv5X1kibHwalH5eq4-13" value="首先获取包组信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="970" y="38" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="rArM3rnajTcCenrp1fIl-2" target="rArM3rnajTcCenrp1fIl-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-2" value="GetChunkGroupConfigItem(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-92" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="rArM3rnajTcCenrp1fIl-4" target="rArM3rnajTcCenrp1fIl-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1535" y="-60" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-4" value="如果self.CurChunkGroupInfoMap[groupId]==nil&lt;div&gt;说明还未初始化过该包组的下载信息&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="-15" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.375;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-11" target="rArM3rnajTcCenrp1fIl-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-7" value="先获取F-分包表中相应包组的信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1340" y="-92" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-8" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="680" as="sourcePoint" />
            <mxPoint x="380" y="-390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-9" value="GetChunkGroupConfigMap" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-220" y="-92" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-11" value="直接返回self.CurChunkGroupConfigMap&lt;div&gt;即F-分包表中的数据&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-280" y="-30" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rArM3rnajTcCenrp1fIl-12" value="返回F-分包表中相应包组的数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="85" y="-22" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OkrL8AyqHjBuT8yEN-5--1" value="group = _MOE.Utils.CommonUtils:DeepCopy(MoeChunkCommonDefine.ChunkGroupInfo)&lt;div&gt;&lt;div&gt;group.NeedUpdateChunkGroup = true&lt;/div&gt;&lt;div&gt;group.NeedUpdateDownloadInfo = true&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1760" y="-107" width="500" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OkrL8AyqHjBuT8yEN-5--2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.646;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="rArM3rnajTcCenrp1fIl-4" target="OkrL8AyqHjBuT8yEN-5--1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OkrL8AyqHjBuT8yEN-5--3" value="深拷贝一份包组信息，之后进行赋值和修改后存入CurChunkGroupInfoMap" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1800" y="-130" width="420" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-1" target="EgfYHaSXt62NNEBrkIG0-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-1" value="如果group.NeedUpdateChunkGroup需要更新包组信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="55" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.009;entryY=0.501;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="5cEbv5X1kibHwalH5eq4-11" target="EgfYHaSXt62NNEBrkIG0-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-3" target="EgfYHaSXt62NNEBrkIG0-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-3" value="IsPufferReadyByGroupId(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1800" y="40" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-5" value="MoeAssetsUtils" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2550" y="-330" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EBJCk_LxA7f1i_R0lV7n-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-6" value="CheckPufferIsReadyByGroupId" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2520" y="40" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-8" value="通过groupId获取到对应featureName&lt;div&gt;再通过featureName获取到对应puffer是否初始化完成&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2450" y="-22" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-10" value="如果MoeAssetsUtils.IsEditor(true)，在编辑器中就直接return true" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2860" y="-122" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.452;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EgfYHaSXt62NNEBrkIG0-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-12" value="&lt;font color=&quot;#ff0000&quot;&gt;为什么编辑器中默认每个puffer都已准备好了？&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="3125" y="-140" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-13" value="如果pakMgr:CheckAllPufferIsReady()所有puffer都已准备好，也直接return true" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2868" y="-60" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EgfYHaSXt62NNEBrkIG0-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.333;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EgfYHaSXt62NNEBrkIG0-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-1" value="如果local groupConf = _MOE.Config.ChunkGroupData:GetDataByKey(groupId)为nil，&lt;div&gt;没有包组信息也返回nil，没有包组信息，后续也不会下载&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2870" y="-15" width="480" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.375;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EBJCk_LxA7f1i_R0lV7n-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-3" value="如果pakMgr:CheckPufferIsReadyByChunkName(chunkName)为nil，&lt;div&gt;某一个pak需要的puffer初始化失败返回false，&lt;/div&gt;&lt;div&gt;但如果dailReset为true，初始化失败需要重新初始化，&lt;/div&gt;&lt;div&gt;就pakMgr:ResetPufferByChunkName(chunkName)重新初始化，但结果仍然返回false&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2860" y="38" width="480" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-5" value="否则，如果每一个pak对应的puffer都初始化成功&lt;div&gt;就返回true&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2870" y="140" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-6" target="EBJCk_LxA7f1i_R0lV7n-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-7" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2420" y="440" as="sourcePoint" />
            <mxPoint x="2420" y="-450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-9" value="如果有puffer没有准备好，就直接返回包组信息，&lt;div&gt;不再进行一下操作，但此时信息中的ChunkGroup为空，没有pak的信息&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1710" y="113" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="EBJCk_LxA7f1i_R0lV7n-10" target="rArM3rnajTcCenrp1fIl-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2330" y="235" />
              <mxPoint x="2330" y="-160" />
              <mxPoint x="330" y="-160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-10" value="local configItem =&amp;nbsp;self.Owner:GetChunkGroupConfigItem(groupId)&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1715" y="215" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-12" value="&lt;div&gt;在pakRefGroupMap[pak]中添加groupId表示该pak在这个包组中有&lt;/div&gt;&lt;div&gt;group.ChunkGroup中添加pak，表示包组中有这个pak&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;self.__diffCacheFileTotalSize[pak] = nil目前不理解这个啥意思&lt;/font&gt;&lt;/div&gt;&lt;div&gt;group.NeedUpdateChunkGroup = false以及更新过包组中有哪些包的信息了&lt;/div&gt;&lt;div&gt;self.CurChunkGroupInfoMap[groupId] = group在包组map中填上这个包组的信息&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1960" y="280" width="450" height="100" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.001;entryY=0.519;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EBJCk_LxA7f1i_R0lV7n-10" target="EBJCk_LxA7f1i_R0lV7n-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.002;entryY=0.639;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="EgfYHaSXt62NNEBrkIG0-1" target="EBJCk_LxA7f1i_R0lV7n-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1570" y="241" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-15" value="&lt;font color=&quot;#ff0000&quot;&gt;这里为什么不在第一次获取包组信息的时候&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;把包组中pak的信息也填上&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;没必要获取两次包组信息吧？&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2160" y="133" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EBJCk_LxA7f1i_R0lV7n-16" value="GetIsInAppDownloadInfo(group)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1120.5" y="255" width="189" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-1" value="如果在底包中，&lt;div&gt;就直接返回包组已下载完成&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1050" y="210" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="zegwxUL89KQ7tsU-fR5h-2" target="rArM3rnajTcCenrp1fIl-2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1380" y="410" />
              <mxPoint x="1380" y="-47" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-2" value="GetPufferNotReadyDownLoadInfo(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1085" y="380" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.328;entryY=1.045;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" edge="1" parent="1" source="zegwxUL89KQ7tsU-fR5h-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1380.5" y="392.3526315789475" as="sourcePoint" />
            <mxPoint x="1868.88" y="84.99999999999982" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-6" value="如果puffer没有准备好/初始化失败&lt;div&gt;就直接吧需要下载的大小设为100MB来&lt;/div&gt;&lt;div&gt;诱导玩家再次点击下载以再次出发初始化&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1400" y="390" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-7" value="DownloadInfo.DownloadSize = (config.downloadSize or 0) * 1024 * 1024" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1430" y="440" width="410" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.005;entryY=0.459;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="zegwxUL89KQ7tsU-fR5h-2" target="zegwxUL89KQ7tsU-fR5h-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-10" value="如果puffer没有准备好/初始化失败&lt;div&gt;就直接吧需要下载的大小设为100MB来&lt;/div&gt;&lt;div&gt;诱导玩家再次点击下载以再次出发初始化&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="990" y="320" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="zegwxUL89KQ7tsU-fR5h-11" target="zegwxUL89KQ7tsU-fR5h-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-11" value="如果group and group.DownloadInfo&lt;div&gt;并且包组不在底包中&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1085" y="500" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.003;entryY=0.539;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="5cEbv5X1kibHwalH5eq4-6" target="zegwxUL89KQ7tsU-fR5h-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2LbkLb7nEPTzZpbKEL1S-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="zegwxUL89KQ7tsU-fR5h-13" target="ZoTpO-E-y77L-gHKQsqO-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zegwxUL89KQ7tsU-fR5h-13" value="如果group.DownloadInfo.HasInited为false，&lt;div&gt;即包组信息还没有初始化过&lt;/div&gt;&lt;div&gt;就强制把reCheck设为true&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="990" y="570" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ZoTpO-E-y77L-gHKQsqO-1" target="W1clx_jqjv_z5-9Xy4Aw-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZoTpO-E-y77L-gHKQsqO-1" value="如果reCheck&amp;nbsp;&lt;div&gt;and (group.DownloadInfo.DownloadState &amp;lt;= MoeChunkCommonDefine.DownloadState.None 目前还没有下载，并且需要下载&lt;/div&gt;&lt;div&gt;and not group.NeedUpdateChunkGroup接下来需要获取包组大小，需要在pak信息更新后进行&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1280" y="570" width="690" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="5cEbv5X1kibHwalH5eq4-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2165" y="480" />
              <mxPoint x="1220" y="480" />
              <mxPoint x="1220" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="W1clx_jqjv_z5-9Xy4Aw-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="DKOrTGj42sUnfdID28H5-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="DKOrTGj42sUnfdID28H5-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-1" value="GetAndUpdateGroupState(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2030" y="570" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-3" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2420" y="440" as="sourcePoint" />
            <mxPoint x="2910" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-6" value="先获取包组信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2150" y="518" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-7" value="如果group.IsInApp在底包中，就直接返回下载完成" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2380" y="518" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.491;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-1" target="W1clx_jqjv_z5-9Xy4Aw-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-9" target="W1clx_jqjv_z5-9Xy4Aw-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-9" value="GetChunkGroupConfigState&lt;div&gt;(basePath, groupId)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2940" y="530" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-10" target="mCDaXQ1oLwFUrLK5YZRS-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W1clx_jqjv_z5-9Xy4Aw-10" value="GetCacheJson(basePath)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3340" y="480" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-1" value="&lt;div&gt;local path = string.format(&quot;%s/%s&quot;, basePath, MoeChunkCommonDefine.ChunkDownLoadCacheFileName)&lt;/div&gt;&lt;div&gt;local FileContent = UE4.UELoadRawFile(path)&lt;/div&gt;&lt;div&gt;local jsonTable = UE4.rapidjson.decode(FileContent)&lt;/div&gt;&lt;div&gt;MoeAssetsUtils.__cachedJson = jsonTable or {}&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="3560" y="475" width="600" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-3" value="获取所有文件的存储的cache信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="3315" y="445" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-4" value="如果cacheJson[key].finished&lt;div&gt;返回MoeChunkCommonDefine.GroupState.Update，需要更新包组状态&lt;/div&gt;&lt;div&gt;否则返回MoeChunkCommonDefine.GroupState.Continue，继续下载包组&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="3350" y="680" width="410" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mCDaXQ1oLwFUrLK5YZRS-5" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;如果cacheJson[key].download为false，&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;或者cacheJson[key]不存在，就直接返回包组需要下载&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;MoeChunkCommonDefine.GroupState.Download&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="3315" y="580" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.004;entryY=0.504;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-9" target="mCDaXQ1oLwFUrLK5YZRS-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.667;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="W1clx_jqjv_z5-9Xy4Aw-9" target="mCDaXQ1oLwFUrLK5YZRS-4">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3230" y="560" />
              <mxPoint x="3230" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-5" value="根据存储的包组cache信息来获取当前包组的下载状态" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2630" y="560" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-6" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2910" y="1120" as="sourcePoint" />
            <mxPoint x="2910" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-7" value="如果包组信息读取失败、包组中pak的信息为nil，puffer未初始化成功或者NeedUpdateChunkGroup，&lt;div&gt;需要刷新一遍包组中有哪些pak，返回MoeChunkCommonDefine.GroupState.Invalid&lt;/div&gt;&lt;div&gt;即不能对包组进行下载&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2353" y="630" width="560" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-9" target="DKOrTGj42sUnfdID28H5-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-9" value="GetPakLocalState" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2370" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-12" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="4160" y="1210" as="sourcePoint" />
            <mxPoint x="4140" y="-250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-13" value="MoePakLoader" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="4428.5" y="-310" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-14" value="IsPakDownloadFinished" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="4429" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-16" value="&lt;div&gt;先获取pakloader，如果为nil，就返回nil&lt;/div&gt;&lt;div&gt;检测从pakloader信息中检测包组是否下载成功&lt;/div&gt;如果当前pak的LoaderState是准备mount、mount成功或失败&lt;div&gt;就说明以及下载完成，返回MoeChunkCommonDefine.GroupState.Finish&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2550" y="770" width="410" height="70" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-17" value="否则如果当前pak已存在就返回MoeChunkCommonDefine.GroupState.Update" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2530" y="870" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.564;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-9" target="DKOrTGj42sUnfdID28H5-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-19" value="否则就说明包组还未开始下载，&lt;div&gt;返回MoeChunkCommonDefine.GroupState.None&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2540" y="920" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-9" target="DKOrTGj42sUnfdID28H5-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-21" value="遍历每一个pak，如果pak全部下载成功&lt;div&gt;就返回MoeChunkCommonDefine.GroupState.Finish下载完成&lt;/div&gt;&lt;div&gt;如果有个别pak下载成功，&lt;/div&gt;&lt;div&gt;就返回MoeChunkCommonDefine.GroupState.Continue继续下载&lt;/div&gt;&lt;div&gt;如果没有一个pak下载完，&lt;/div&gt;&lt;div&gt;即返回当前包组的下载状态&lt;/div&gt;&lt;div&gt;即根据cache信息获取的下载状态&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2140" y="810" width="360" height="130" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.629;entryY=1.026;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-21" target="W1clx_jqjv_z5-9Xy4Aw-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2301" y="980" />
              <mxPoint x="3072" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-23" value="&lt;font color=&quot;#ff0000&quot;&gt;这个函数会返回包组的最新下载状态，&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;但是此处并没有使用下载状态的信息，&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;所以这个为什么还要有这段代码？&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2050" y="640" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-25" value="&lt;font color=&quot;#ff0000&quot;&gt;此处需要直接读取本地文件大小，&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;消耗较大&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="3308" y="390" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-26" value="根据包组当前的下载状态设置剩余需要下载的大小和接下来的状态" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1565" y="670" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.53;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ZoTpO-E-y77L-gHKQsqO-1" target="DKOrTGj42sUnfdID28H5-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-29" target="DKOrTGj42sUnfdID28H5-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-29" value="如果downloadInfo.DownloadState &lt;= MoeChunkCommonDefine.DownloadState.None" style="text;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="540" y="880" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-31" target="9BERAMWRa7RxrbQvjHLC-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-31" value="StartDownloadGroup(groupId, MoeChunkCommonDefine.TaskLevel.Normal,false)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1075" y="870" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-33" target="DKOrTGj42sUnfdID28H5-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-33" value="如果downloadInfo.DownloadState == MoeChunkCommonDefine.DownloadState.Ing&lt;div&gt;如果正在下载，就只修改下载优先级至Normal&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="530" y="973" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.567;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="DKOrTGj42sUnfdID28H5-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-35" value="ChangeDownloadTaskLevel(groupId, MoeChunkCommonDefine.TaskLevel.Normal)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1085" y="963" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DKOrTGj42sUnfdID28H5-37" target="WK4fV78gmZCNVYaioPYy-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-37" value="如果downloadInfo.DownloadState == MoeChunkCommonDefine.DownloadState.Pause" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="540" y="1078" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DKOrTGj42sUnfdID28H5-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.002;entryY=0.638;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="5cEbv5X1kibHwalH5eq4-5" target="DKOrTGj42sUnfdID28H5-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WK4fV78gmZCNVYaioPYy-2" value="ResumeDownloadGroup(groupId)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1104.5" y="1063" width="205" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="9BERAMWRa7RxrbQvjHLC-2" target="9BERAMWRa7RxrbQvjHLC-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-2" value="CheckGroupIsInDownloading(inGroupId)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1535" y="775" width="225" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-4" value="如果包组正在下载就只修改包组下载优先级至Normal" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1425" y="745" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-6" value="ChangeDownloadTaskLevel(groupId, taskLevel)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1810" y="775" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9BERAMWRa7RxrbQvjHLC-8" value="修改下载任务优先级" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1805" y="738" width="130" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="77BsFedVGIXCOyJEhH9Z" name="下载数据初始化与刷新">
    <mxGraphModel dx="1943" dy="1066" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Iap6PsLM9TZzxNTgIO9O-1" value="MoeChunkGroupManager" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="30" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Iap6PsLM9TZzxNTgIO9O-3" value="InitChunkGroupConfigMap" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="117.5" y="170" width="155" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Iap6PsLM9TZzxNTgIO9O-7" value="从F-分包表中读取数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="117.5" y="240" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="OmCMyaqTxQ6llqbQJzmK-1" target="S3xliCYBSsEvqeYIsqXU-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="OmCMyaqTxQ6llqbQJzmK-1" target="S3xliCYBSsEvqeYIsqXU-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OmCMyaqTxQ6llqbQJzmK-1" value="GetPakDownloadedSize" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="180" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OmCMyaqTxQ6llqbQJzmK-2" value="MoePakManager" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-1" value="GetPakLoader" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-3" value="MoePakLoader" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="980" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="S3xliCYBSsEvqeYIsqXU-4" target="S3xliCYBSsEvqeYIsqXU-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="S3xliCYBSsEvqeYIsqXU-4" target="S3xliCYBSsEvqeYIsqXU-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="S3xliCYBSsEvqeYIsqXU-4" target="S3xliCYBSsEvqeYIsqXU-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1080" y="290" />
              <mxPoint x="1080" y="430" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-4" value="GetPakFileDownloadedSize" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="860" y="260" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-6" value="数据由每个pak的pakloader进行存储" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="420" y="250" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-7" value="MoePufferInstance" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1490" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-8" value="IsPakDownloadFinished" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="160" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-10" value="判断是否下载完成" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="970" y="220" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-11" value="GetPakFileTotalSize" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1140" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-13" value="下载完成直接返回文件总大小" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1060" y="248" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="S3xliCYBSsEvqeYIsqXU-14" target="NA7hQgmorC5xM0s7l6Vz-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="S3xliCYBSsEvqeYIsqXU-14" target="NA7hQgmorC5xM0s7l6Vz-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-14" value="GetFileDownloadSize" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="398" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S3xliCYBSsEvqeYIsqXU-16" value="没有下载完成就向puffer查找" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1130" y="398" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-1" value="GetFileDiffPath" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1654" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-3" value="fPuffer:GetFileDownloadedSize" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1670" y="450" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-5" value="获取文件的下载路径" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1525" y="368" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="NA7hQgmorC5xM0s7l6Vz-6" value="调用C++端获取已下载大小" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1670" y="413" width="170" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
